<html>
<head>
<title>Mesa Source Code Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="qindex">
<a class="qindex" href="../main/index.html">core</a> |
<a class="qindex" href="../glapi/index.html">glapi</a> |
<a class="qindex" href="../glsl/index.html">glsl</a> |
<a class="qindex" href="../nir/index.html">nir</a> |
<a class="qindex" href="../vbo/index.html">vbo</a> |
<a class="qindex" href="../math/index.html">math</a> |
<a class="qindex" href="../swrast/index.html">swrast</a> |
<a class="qindex" href="../swrast_setup/index.html">swrast_setup</a> |
<a class="qindex" href="../tnl/index.html">tnl</a> |
<a class="qindex" href="../tnl_dd/index.html">tnl_dd</a> |
<a class="qindex" href="../gbm/index.html">gbm</a> |
<a class="qindex" href="../i965/index.html">i965</a>
</div>
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">intel_buffer_object Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Intel vertex/pixel buffer object, derived from Mesa's <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__buffer__object.html">gl_buffer_object</a>.  
 <a href="structintel__buffer__object.html#details">More...</a></p>

<p><code>#include &lt;intel_buffer_objects.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a0d1b32610c21fa3d4d09d84badea790e"><td class="memItemLeft" align="right" valign="top">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__buffer__object.html">gl_buffer_object</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structintel__buffer__object.html#a0d1b32610c21fa3d4d09d84badea790e">Base</a></td></tr>
<tr class="separator:a0d1b32610c21fa3d4d09d84badea790e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc717ea69f5e8b92a2b3040dc7ae1d48"><td class="memItemLeft" align="right" valign="top">drm_intel_bo *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structintel__buffer__object.html#acc717ea69f5e8b92a2b3040dc7ae1d48">buffer</a></td></tr>
<tr class="separator:acc717ea69f5e8b92a2b3040dc7ae1d48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad35b932141a49e9c6a4d37112978604"><td class="memItemLeft" align="right" valign="top">drm_intel_bo *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structintel__buffer__object.html#aad35b932141a49e9c6a4d37112978604">range_map_bo</a> [<a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/mtypes_8h.html#a943bef3a7e4411cb5151540439f8cdcfa183e25114b6474e32eafd7b6a50881e6">MAP_COUNT</a>]</td></tr>
<tr class="separator:aad35b932141a49e9c6a4d37112978604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab56b05522fd297e432cd0c0fe52401c7"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structintel__buffer__object.html#ab56b05522fd297e432cd0c0fe52401c7">map_extra</a> [<a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/mtypes_8h.html#a943bef3a7e4411cb5151540439f8cdcfa183e25114b6474e32eafd7b6a50881e6">MAP_COUNT</a>]</td></tr>
<tr class="memdesc:ab56b05522fd297e432cd0c0fe52401c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alignment offset from the range_map_bo temporary mapping to the returned obj-&gt;Pointer (caused by GL_ARB_map_buffer_alignment).  <a href="#ab56b05522fd297e432cd0c0fe52401c7">More...</a><br /></td></tr>
<tr class="separator:ab56b05522fd297e432cd0c0fe52401c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a3a4a9dff14194270368d5a65a845ab95"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structintel__buffer__object.html#a3a4a9dff14194270368d5a65a845ab95">gpu_active_start</a></td></tr>
<tr class="separator:a3a4a9dff14194270368d5a65a845ab95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ba3869e7cdea710fa2d7dd6fe7aef1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structintel__buffer__object.html#a55ba3869e7cdea710fa2d7dd6fe7aef1">gpu_active_end</a></td></tr>
<tr class="separator:a55ba3869e7cdea710fa2d7dd6fe7aef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8524595c6b3e9bb64d36e6af2e9d2ecb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structintel__buffer__object.html#a8524595c6b3e9bb64d36e6af2e9d2ecb">prefer_stall_to_blit</a></td></tr>
<tr class="memdesc:a8524595c6b3e9bb64d36e6af2e9d2ecb"><td class="mdescLeft">&#160;</td><td class="mdescRight">If we've avoided stalls/blits using the active tracking, flag the buffer for (occasional) stalling in the future to avoid getting stuck in a cycle of blitting on buffer wraparound.  <a href="#a8524595c6b3e9bb64d36e6af2e9d2ecb">More...</a><br /></td></tr>
<tr class="separator:a8524595c6b3e9bb64d36e6af2e9d2ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Intel vertex/pixel buffer object, derived from Mesa's <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__buffer__object.html">gl_buffer_object</a>. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a0d1b32610c21fa3d4d09d84badea790e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d1b32610c21fa3d4d09d84badea790e">&sect;&nbsp;</a></span>Base</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__buffer__object.html">gl_buffer_object</a> intel_buffer_object::Base</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="intel__buffer__objects_8c.html#adc1cbfbc710c328d7a24d2949295a610">alloc_buffer_object()</a>, <a class="el" href="intel__buffer__objects_8c.html#a8c048281a56194c6d86a4fec5d5648c6">brw_buffer_data()</a>, <a class="el" href="intel__buffer__objects_8c.html#ae97d37201668b96c4883f4dfd2f02f03">brw_buffer_subdata()</a>, <a class="el" href="intel__buffer__objects_8c.html#ae0b71a7d8cc7ab7620f4cb26786b5f7c">brw_new_buffer_object()</a>, <a class="el" href="brw__draw__upload_8c.html#a92d84da1de9a1eddfd3e6e97a2b60ccf">brw_prepare_vertices()</a>, <a class="el" href="brw__wm__surface__state_8c.html#a0a4730a02dff893ec2d4b7e42c068bbf">brw_update_buffer_texture_surface()</a>, <a class="el" href="brw__wm__surface__state_8c.html#aabda1bf227581ecb0b25d04e6b2f4c12">brw_upload_abo_surfaces()</a>, and <a class="el" href="brw__wm__surface__state_8c.html#a392489bef3d52dbb5b753f058d8df1eb">update_image_surface()</a>.</p>

</div>
</div>
<a id="acc717ea69f5e8b92a2b3040dc7ae1d48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc717ea69f5e8b92a2b3040dc7ae1d48">&sect;&nbsp;</a></span>buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drm_intel_bo* intel_buffer_object::buffer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="intel__buffer__objects_8c.html#adc1cbfbc710c328d7a24d2949295a610">alloc_buffer_object()</a>, <a class="el" href="intel__buffer__objects_8c.html#a8c048281a56194c6d86a4fec5d5648c6">brw_buffer_data()</a>, <a class="el" href="intel__buffer__objects_8c.html#ae97d37201668b96c4883f4dfd2f02f03">brw_buffer_subdata()</a>, <a class="el" href="intel__buffer__objects_8c.html#a7081b5a0ef398013d965d5616f6a869d">brw_delete_buffer()</a>, <a class="el" href="intel__buffer__objects_8c.html#a564f3e3b71fa32734a8d8d9d3583a4a5">brw_flush_mapped_buffer_range()</a>, <a class="el" href="intel__buffer__objects_8c.html#a5ccb41c7e944b0b0a10d0c39d3de6890">brw_get_buffer_subdata()</a>, <a class="el" href="intel__buffer__objects_8c.html#a801b41b5f4b93399367c86b496b18c12">brw_map_buffer_range()</a>, <a class="el" href="intel__buffer__objects_8c.html#ae0b71a7d8cc7ab7620f4cb26786b5f7c">brw_new_buffer_object()</a>, <a class="el" href="brw__draw_8c.html#a91b102703d560438e552126163cf4748">brw_try_draw_prims()</a>, <a class="el" href="intel__buffer__objects_8c.html#ac81e0296a6228d2fbd5092c060738099">brw_unmap_buffer()</a>, <a class="el" href="hsw__queryobj_8c.html#a0d6854b726f8f8837baccefc3846644b">hsw_store_query_result()</a>, <a class="el" href="brw__object__purgeable_8c.html#a44136fe498e945bee11b8e4fcc8e2814">intel_buffer_object_purgeable()</a>, <a class="el" href="brw__object__purgeable_8c.html#acebdbab2645fce7d8550a13caa86e1a3">intel_buffer_object_unpurgeable()</a>, <a class="el" href="intel__buffer__objects_8h.html#a80b7cbb35bf817ea906397065d594e80">intel_bufferobj_buffer()</a>, <a class="el" href="intel__buffer__objects_8c.html#aa6c12e671bf98cb12f76eae4ee35761b">release_buffer()</a>, and <a class="el" href="brw__wm__surface__state_8c.html#a392489bef3d52dbb5b753f058d8df1eb">update_image_surface()</a>.</p>

</div>
</div>
<a id="a55ba3869e7cdea710fa2d7dd6fe7aef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55ba3869e7cdea710fa2d7dd6fe7aef1">&sect;&nbsp;</a></span>gpu_active_end</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t intel_buffer_object::gpu_active_end</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="intel__buffer__objects_8c.html#ae97d37201668b96c4883f4dfd2f02f03">brw_buffer_subdata()</a>, <a class="el" href="intel__buffer__objects_8c.html#afb436c05f05934ebea11c8cc5d5a61d3">mark_buffer_gpu_usage()</a>, and <a class="el" href="intel__buffer__objects_8c.html#a8611f01dde8a217a87a88970f02afa16">mark_buffer_inactive()</a>.</p>

</div>
</div>
<a id="a3a4a9dff14194270368d5a65a845ab95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a4a9dff14194270368d5a65a845ab95">&sect;&nbsp;</a></span>gpu_active_start</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t intel_buffer_object::gpu_active_start</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tracking for what range of the BO may currently be in use by the GPU.</p>
<p>Users often want to either glBufferSubData() or glMapBufferRange() a buffer object where some subset of it is busy on the GPU, without either stalling or doing an extra blit (since our blits are extra expensive, given that we have to reupload most of the 3D state when switching rings). We wish they'd just use glMapBufferRange() with the UNSYNC|INVALIDATE_RANGE flag or the INVALIDATE_BUFFER flag, but lots don't.</p>
<p>To work around apps, we track what range of the BO we might have used on the GPU as vertex data, tranform feedback output, buffer textures, etc., and just do glBufferSubData() with an unsynchronized map when they're outside of that range.</p>
<p>If gpu_active_start &gt; gpu_active_end, then the GPU is not currently accessing the BO (and we can map it without synchronization). </p>

<p>Referenced by <a class="el" href="intel__buffer__objects_8c.html#ae97d37201668b96c4883f4dfd2f02f03">brw_buffer_subdata()</a>, <a class="el" href="intel__buffer__objects_8c.html#afb436c05f05934ebea11c8cc5d5a61d3">mark_buffer_gpu_usage()</a>, and <a class="el" href="intel__buffer__objects_8c.html#a8611f01dde8a217a87a88970f02afa16">mark_buffer_inactive()</a>.</p>

</div>
</div>
<a id="ab56b05522fd297e432cd0c0fe52401c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab56b05522fd297e432cd0c0fe52401c7">&sect;&nbsp;</a></span>map_extra</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned intel_buffer_object::map_extra[<a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/mtypes_8h.html#a943bef3a7e4411cb5151540439f8cdcfa183e25114b6474e32eafd7b6a50881e6">MAP_COUNT</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alignment offset from the range_map_bo temporary mapping to the returned obj-&gt;Pointer (caused by GL_ARB_map_buffer_alignment). </p>

<p>Referenced by <a class="el" href="intel__buffer__objects_8c.html#a564f3e3b71fa32734a8d8d9d3583a4a5">brw_flush_mapped_buffer_range()</a>, <a class="el" href="intel__buffer__objects_8c.html#a801b41b5f4b93399367c86b496b18c12">brw_map_buffer_range()</a>, and <a class="el" href="intel__buffer__objects_8c.html#ac81e0296a6228d2fbd5092c060738099">brw_unmap_buffer()</a>.</p>

</div>
</div>
<a id="a8524595c6b3e9bb64d36e6af2e9d2ecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8524595c6b3e9bb64d36e6af2e9d2ecb">&sect;&nbsp;</a></span>prefer_stall_to_blit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool intel_buffer_object::prefer_stall_to_blit</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If we've avoided stalls/blits using the active tracking, flag the buffer for (occasional) stalling in the future to avoid getting stuck in a cycle of blitting on buffer wraparound. </p>

<p>Referenced by <a class="el" href="intel__buffer__objects_8c.html#ae97d37201668b96c4883f4dfd2f02f03">brw_buffer_subdata()</a>.</p>

</div>
</div>
<a id="aad35b932141a49e9c6a4d37112978604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad35b932141a49e9c6a4d37112978604">&sect;&nbsp;</a></span>range_map_bo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drm_intel_bo* intel_buffer_object::range_map_bo[<a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/mtypes_8h.html#a943bef3a7e4411cb5151540439f8cdcfa183e25114b6474e32eafd7b6a50881e6">MAP_COUNT</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="intel__buffer__objects_8c.html#a564f3e3b71fa32734a8d8d9d3583a4a5">brw_flush_mapped_buffer_range()</a>, <a class="el" href="intel__buffer__objects_8c.html#a801b41b5f4b93399367c86b496b18c12">brw_map_buffer_range()</a>, and <a class="el" href="intel__buffer__objects_8c.html#ac81e0296a6228d2fbd5092c060738099">brw_unmap_buffer()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="intel__buffer__objects_8h.html">intel_buffer_objects.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
