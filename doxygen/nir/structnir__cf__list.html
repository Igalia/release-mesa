<html>
<head>
<title>Mesa Source Code Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="qindex">
<a class="qindex" href="../main/index.html">core</a> |
<a class="qindex" href="../glapi/index.html">glapi</a> |
<a class="qindex" href="../glsl/index.html">glsl</a> |
<a class="qindex" href="../nir/index.html">nir</a> |
<a class="qindex" href="../vbo/index.html">vbo</a> |
<a class="qindex" href="../math/index.html">math</a> |
<a class="qindex" href="../swrast/index.html">swrast</a> |
<a class="qindex" href="../swrast_setup/index.html">swrast_setup</a> |
<a class="qindex" href="../tnl/index.html">tnl</a> |
<a class="qindex" href="../tnl_dd/index.html">tnl_dd</a> |
<a class="qindex" href="../gbm/index.html">gbm</a> |
<a class="qindex" href="../i965/index.html">i965</a>
</div>
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">nir_cf_list Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Control flow motion.  
 <a href="structnir__cf__list.html#details">More...</a></p>

<p><code>#include &lt;nir_control_flow.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a3627c5a35d6d73e29ca611e4ee20e1db"><td class="memItemLeft" align="right" valign="top">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/glsl.tag:../glsl/" href="../glsl/structexec__list.html">exec_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnir__cf__list.html#a3627c5a35d6d73e29ca611e4ee20e1db">list</a></td></tr>
<tr class="separator:a3627c5a35d6d73e29ca611e4ee20e1db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fd9a68453f1e5694da08f52c0e836e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnir__function__impl.html">nir_function_impl</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnir__cf__list.html#a1fd9a68453f1e5694da08f52c0e836e6">impl</a></td></tr>
<tr class="separator:a1fd9a68453f1e5694da08f52c0e836e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Control flow motion. </p>
<p>These functions let you take a part of a control flow list (basically equivalent to a series of statement in GLSL) and "extract" it from the IR, so that it's a free-floating piece of IR that can be either re-inserted somewhere else or deleted entirely. A few notes on using it:</p>
<ol type="1">
<li><p class="startli">Phi nodes are considered attached to the piece of control flow that their sources come from. There are three places where phi nodes can occur, which are the three places where a block can have multiple predecessors:</p>
<p class="startli">1) After an if statement, if neither branch ends in a jump. 2) After a loop, if there are multiple breaks. 3) At the beginning of a loop.</p>
<p class="startli">For #1, the phi node is considered to be part of the if, and for #2 and #3 the phi node is considered to be part of the loop. This allows us to keep phis intact, but it means that phi nodes cannot be separated from the control flow they come from. For example, extracting an if without extracting all the phi nodes after it is not allowed, and neither is extracting only some of the phi nodes at the beginning of a block. It also means that extracting from the beginning of a basic block actually means extracting from the first non-phi instruction, since there's no situation where extracting phi nodes without extracting what comes before them makes any sense.</p>
</li>
<li>Phi node sources are guaranteed to remain valid, meaning that they still correspond one-to-one with the predecessors of the basic block they're part of. In addition, the original sources will be preserved unless they correspond to a break or continue that was deleted. However, no attempt is made to ensure that SSA form is maintained. In particular, it is <em>not</em> guaranteed that definitions of SSA values will dominate all their uses after all is said and done. Either the caller must ensure that this is the case, or it must insert extra phi nodes to restore SSA.</li>
<li>It is invalid to move a piece of IR with a break/continue outside of the loop it references. Doing this will result in invalid successors/predecessors and phi node sources.</li>
<li>It is invalid to move a piece of IR from one function implementation to another.</li>
<li>Extracting a control flow list will leave lots of dangling references to and from other pieces of the IR. It also leaves things in a not 100% consistent state. This means that some things (e.g. inserting instructions) might not work reliably on the extracted control flow. It also means that extracting control flow without re-inserting it or deleting it is a Bad Thing (tm). </li>
</ol>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a1fd9a68453f1e5694da08f52c0e836e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fd9a68453f1e5694da08f52c0e836e6">&sect;&nbsp;</a></span>impl</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnir__function__impl.html">nir_function_impl</a>* nir_cf_list::impl</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="nir__control__flow_8h.html#a85239c2f2c471bf6183a59306f55854c">nir_cf_delete()</a>, <a class="el" href="nir__control__flow_8h.html#a5d86de4795173667313d7141211e8335">nir_cf_extract()</a>, and <a class="el" href="nir__control__flow_8h.html#afd534eba7f147942592e8f5d2728d632">nir_cf_list_clone()</a>.</p>

</div>
</div>
<a id="a3627c5a35d6d73e29ca611e4ee20e1db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3627c5a35d6d73e29ca611e4ee20e1db">&sect;&nbsp;</a></span>list</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/glsl.tag:../glsl/" href="../glsl/structexec__list.html">exec_list</a> nir_cf_list::list</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="nir__opt__loop__unroll_8c.html#a95d4f94e52792ef903ef170bce071a27">complex_unroll()</a>, <a class="el" href="nir__lower__returns_8c.html#afdfcb4d5304868d817a527869fdad2a2">lower_returns_in_block()</a>, <a class="el" href="nir__control__flow_8h.html#a85239c2f2c471bf6183a59306f55854c">nir_cf_delete()</a>, <a class="el" href="nir__control__flow_8h.html#a5d86de4795173667313d7141211e8335">nir_cf_extract()</a>, <a class="el" href="nir__control__flow_8h.html#afd534eba7f147942592e8f5d2728d632">nir_cf_list_clone()</a>, <a class="el" href="nir__control__flow_8h.html#a2394a6efc0578140df46b978aea33635">nir_cf_reinsert()</a>, and <a class="el" href="nir__lower__returns_8c.html#a0b1442d5d0c2acec050ea67786e6c39b">predicate_following()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="nir__control__flow_8h.html">nir_control_flow.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
