<html>
<head>
<title>Mesa Source Code Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="qindex">
<a class="qindex" href="../main/index.html">core</a> |
<a class="qindex" href="../glapi/index.html">glapi</a> |
<a class="qindex" href="../glsl/index.html">glsl</a> |
<a class="qindex" href="../nir/index.html">nir</a> |
<a class="qindex" href="../vbo/index.html">vbo</a> |
<a class="qindex" href="../math/index.html">math</a> |
<a class="qindex" href="../swrast/index.html">swrast</a> |
<a class="qindex" href="../swrast_setup/index.html">swrast_setup</a> |
<a class="qindex" href="../tnl/index.html">tnl</a> |
<a class="qindex" href="../tnl_dd/index.html">tnl_dd</a> |
<a class="qindex" href="../gbm/index.html">gbm</a> |
<a class="qindex" href="../i965/index.html">i965</a>
</div>
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">brw_perf_query_object Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>i965 representation of a performance query object.  
 <a href="structbrw__perf__query__object.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a1b6621702bf60fa93a785baff5bec5d1"><td class="memItemLeft" align="right" valign="top">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__perf__query__object.html">gl_perf_query_object</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbrw__perf__query__object.html#a1b6621702bf60fa93a785baff5bec5d1">base</a></td></tr>
<tr class="separator:a1b6621702bf60fa93a785baff5bec5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc9b6b7fe50964b91a8ec6c47b27fe97"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structbrw__perf__query__info.html">brw_perf_query_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbrw__perf__query__object.html#adc9b6b7fe50964b91a8ec6c47b27fe97">query</a></td></tr>
<tr class="separator:adc9b6b7fe50964b91a8ec6c47b27fe97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7275db4948023cd637441de7a9d8907b"><td class="memItemLeft" >union {</td></tr>
<tr class="memitem:a5d94add637dd07cec3ebdc9311c4fb6e"><td class="memItemLeft" >&#160;&#160;&#160;struct {</td></tr>
<tr class="memitem:a0f0b6006d7a8e4bc4cb093775602e2f2"><td class="memItemLeft" >&#160;&#160;&#160;&#160;&#160;&#160;drm_intel_bo *&#160;&#160;&#160;<a class="el" href="structbrw__perf__query__object.html#a899e82260c932c523e28800858f71dac">bo</a></td></tr>
<tr class="memdesc:a0f0b6006d7a8e4bc4cb093775602e2f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">BO containing OA counter snapshots at query Begin/End time.  <a href="#a0f0b6006d7a8e4bc4cb093775602e2f2">More...</a><br /></td></tr>
<tr class="separator:a0f0b6006d7a8e4bc4cb093775602e2f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4081b2f34516eaa2c303b09b384be609"><td class="memItemLeft" >&#160;&#160;&#160;&#160;&#160;&#160;int&#160;&#160;&#160;<a class="el" href="structbrw__perf__query__object.html#ac747760276a712f543953a88443ef942">begin_report_id</a></td></tr>
<tr class="memdesc:a4081b2f34516eaa2c303b09b384be609"><td class="mdescLeft">&#160;</td><td class="mdescRight">The MI_REPORT_PERF_COUNT command lets us specify a unique ID that will be reflected in the resulting OA report that's written by the GPU.  <a href="#a4081b2f34516eaa2c303b09b384be609">More...</a><br /></td></tr>
<tr class="separator:a4081b2f34516eaa2c303b09b384be609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9555561c08d41856b29e6999c2b9fd8d"><td class="memItemLeft" >&#160;&#160;&#160;&#160;&#160;&#160;struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/glsl.tag:../glsl/" href="../glsl/structexec__node.html">exec_node</a> *&#160;&#160;&#160;<a class="el" href="structbrw__perf__query__object.html#a4b0eac7649a5ca3759c745e3030fe487">samples_head</a></td></tr>
<tr class="memdesc:a9555561c08d41856b29e6999c2b9fd8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference the head of the brw-&gt;perfquery.sample_buffers list at the time that the query started (so we only need to look at nodes after this point when looking for samples related to this query)  <a href="#a9555561c08d41856b29e6999c2b9fd8d">More...</a><br /></td></tr>
<tr class="separator:a9555561c08d41856b29e6999c2b9fd8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512319beeba0342b1c8c1c9c4ce5f954"><td class="memItemLeft" >&#160;&#160;&#160;&#160;&#160;&#160;uint64_t&#160;&#160;&#160;<a class="el" href="structbrw__perf__query__object.html#a78d5266319f70abc6542abc0818c1d72">accumulator</a> [<a class="el" href="brw__performance__query_8c.html#a5dce72babb9dfc77313d737520d5ccf1">MAX_OA_REPORT_COUNTERS</a>]</td></tr>
<tr class="memdesc:a512319beeba0342b1c8c1c9c4ce5f954"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for the final accumulated OA counters.  <a href="#a512319beeba0342b1c8c1c9c4ce5f954">More...</a><br /></td></tr>
<tr class="separator:a512319beeba0342b1c8c1c9c4ce5f954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcd919af66bd811fbce0ca5fdfe82677"><td class="memItemLeft" >&#160;&#160;&#160;&#160;&#160;&#160;bool&#160;&#160;&#160;<a class="el" href="structbrw__perf__query__object.html#a67cbdba2d04675c9a3edc1c2b580e539">results_accumulated</a></td></tr>
<tr class="memdesc:afcd919af66bd811fbce0ca5fdfe82677"><td class="mdescLeft">&#160;</td><td class="mdescRight">false while in the unaccumulated_elements list, and set to true when the final, end MI_RPC snapshot has been accumulated.  <a href="#afcd919af66bd811fbce0ca5fdfe82677">More...</a><br /></td></tr>
<tr class="separator:afcd919af66bd811fbce0ca5fdfe82677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d94add637dd07cec3ebdc9311c4fb6e"><td class="memItemLeft" valign="top">&#160;&#160;&#160;}&#160;&#160;&#160;<a class="el" href="structbrw__perf__query__object.html#a856250119f177d9c5f9136dbf527ed86">oa</a></td></tr>
<tr class="separator:a5d94add637dd07cec3ebdc9311c4fb6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbd873620207cada3fe860b178f57817"><td class="memItemLeft" >&#160;&#160;&#160;struct {</td></tr>
<tr class="memitem:a745660eba4cd7072cb75a41b015465d8"><td class="memItemLeft" >&#160;&#160;&#160;&#160;&#160;&#160;drm_intel_bo *&#160;&#160;&#160;<a class="el" href="structbrw__perf__query__object.html#a899e82260c932c523e28800858f71dac">bo</a></td></tr>
<tr class="memdesc:a745660eba4cd7072cb75a41b015465d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">BO containing starting and ending snapshots for the statistics counters.  <a href="#a745660eba4cd7072cb75a41b015465d8">More...</a><br /></td></tr>
<tr class="separator:a745660eba4cd7072cb75a41b015465d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbd873620207cada3fe860b178f57817"><td class="memItemLeft" valign="top">&#160;&#160;&#160;}&#160;&#160;&#160;<a class="el" href="structbrw__perf__query__object.html#a6edf7d458fdf0463db146c2e703d18f0">pipeline_stats</a></td></tr>
<tr class="separator:acbd873620207cada3fe860b178f57817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7275db4948023cd637441de7a9d8907b"><td class="memItemLeft" valign="top">};&#160;</td><td class="memItemRight" valign="bottom"></td></tr>
<tr class="separator:a7275db4948023cd637441de7a9d8907b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>i965 representation of a performance query object. </p>
<p>NB: We want to keep this structure relatively lean considering that applications may expect to allocate enough objects to be able to query around all draw calls in a frame. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a7275db4948023cd637441de7a9d8907b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7275db4948023cd637441de7a9d8907b">&sect;&nbsp;</a></span>@33</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union { ... } </td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a78d5266319f70abc6542abc0818c1d72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78d5266319f70abc6542abc0818c1d72">&sect;&nbsp;</a></span>accumulator</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t brw_perf_query_object::accumulator[<a class="el" href="brw__performance__query_8c.html#a5dce72babb9dfc77313d737520d5ccf1">MAX_OA_REPORT_COUNTERS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Storage for the final accumulated OA counters. </p>

</div>
</div>
<a id="a1b6621702bf60fa93a785baff5bec5d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b6621702bf60fa93a785baff5bec5d1">&sect;&nbsp;</a></span>base</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__perf__query__object.html">gl_perf_query_object</a> brw_perf_query_object::base</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="brw__performance__query_8c.html#ad188ec067d7b55680840973aa9557aab">accumulate_oa_reports()</a>, and <a class="el" href="brw__performance__query_8c.html#aef87017800c1dbf4fd4facd1e5cf8015">brw_new_perf_query_object()</a>.</p>

</div>
</div>
<a id="ac747760276a712f543953a88443ef942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac747760276a712f543953a88443ef942">&sect;&nbsp;</a></span>begin_report_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int brw_perf_query_object::begin_report_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The MI_REPORT_PERF_COUNT command lets us specify a unique ID that will be reflected in the resulting OA report that's written by the GPU. </p>
<p>This is the ID we're expecting in the begin report and the the end report should be  + 1. </p>

</div>
</div>
<a id="a899e82260c932c523e28800858f71dac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a899e82260c932c523e28800858f71dac">&sect;&nbsp;</a></span>bo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drm_intel_bo* brw_perf_query_object::bo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>BO containing OA counter snapshots at query Begin/End time. </p>
<p>BO containing starting and ending snapshots for the statistics counters. </p>

<p>Referenced by <a class="el" href="brw__performance__query_8c.html#a046ad087d6a3241ee373e152b200e24f">brw_wait_perf_query()</a>.</p>

</div>
</div>
<a id="a856250119f177d9c5f9136dbf527ed86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a856250119f177d9c5f9136dbf527ed86">&sect;&nbsp;</a></span>oa</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   brw_perf_query_object::oa</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="brw__performance__query_8c.html#ad188ec067d7b55680840973aa9557aab">accumulate_oa_reports()</a>, <a class="el" href="brw__performance__query_8c.html#a73ab579cc7d3b3abfbc21f1a6fb4d770">add_deltas()</a>, <a class="el" href="brw__performance__query_8c.html#a15512cab16c461bd0edd2335cf6a03b0">brw_begin_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#ad964b36be11fc62d1304e83b2d8bb9a6">brw_delete_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#a3485397870e84d9925945f6feb84fe43">brw_end_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#ae604fa293a01f4f96913900e0dc98429">brw_is_perf_query_ready()</a>, <a class="el" href="brw__performance__query_8c.html#a046ad087d6a3241ee373e152b200e24f">brw_wait_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#ab8373fe2d1d17e67803fa4ff5ac4d659">discard_all_queries()</a>, <a class="el" href="brw__performance__query_8c.html#a0114ebe7a2694b3fe3e82b3a048e6b51">drop_from_unaccumulated_query_list()</a>, <a class="el" href="brw__performance__query_8c.html#ad22b6d7509ab2c0c1bb33b973753cca4">dump_perf_query_callback()</a>, and <a class="el" href="brw__performance__query_8c.html#a0d8e5e694ef870d8c22fd0ea62fddea5">get_oa_counter_data()</a>.</p>

</div>
</div>
<a id="a6edf7d458fdf0463db146c2e703d18f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6edf7d458fdf0463db146c2e703d18f0">&sect;&nbsp;</a></span>pipeline_stats</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   brw_perf_query_object::pipeline_stats</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="brw__performance__query_8c.html#a15512cab16c461bd0edd2335cf6a03b0">brw_begin_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#ad964b36be11fc62d1304e83b2d8bb9a6">brw_delete_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#ae604fa293a01f4f96913900e0dc98429">brw_is_perf_query_ready()</a>, <a class="el" href="brw__performance__query_8c.html#a046ad087d6a3241ee373e152b200e24f">brw_wait_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#ad22b6d7509ab2c0c1bb33b973753cca4">dump_perf_query_callback()</a>, <a class="el" href="brw__performance__query_8c.html#aaed08020b9aae6f2511cb05b163a1512">get_pipeline_stats_data()</a>, and <a class="el" href="brw__performance__query_8c.html#adb4159b6f54c4dcacc11ac5c888854d1">snapshot_statistics_registers()</a>.</p>

</div>
</div>
<a id="adc9b6b7fe50964b91a8ec6c47b27fe97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc9b6b7fe50964b91a8ec6c47b27fe97">&sect;&nbsp;</a></span>query</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structbrw__perf__query__info.html">brw_perf_query_info</a>* brw_perf_query_object::query</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="brw__performance__query_8c.html#a73ab579cc7d3b3abfbc21f1a6fb4d770">add_deltas()</a>, <a class="el" href="brw__performance__query_8c.html#a15512cab16c461bd0edd2335cf6a03b0">brw_begin_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#ad964b36be11fc62d1304e83b2d8bb9a6">brw_delete_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#a3485397870e84d9925945f6feb84fe43">brw_end_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#a9f2bd819eef00ea18fc6f0cc72feea9a">brw_get_perf_query_data()</a>, <a class="el" href="brw__performance__query_8c.html#ae604fa293a01f4f96913900e0dc98429">brw_is_perf_query_ready()</a>, <a class="el" href="brw__performance__query_8c.html#aef87017800c1dbf4fd4facd1e5cf8015">brw_new_perf_query_object()</a>, <a class="el" href="brw__performance__query_8c.html#a046ad087d6a3241ee373e152b200e24f">brw_wait_perf_query()</a>, <a class="el" href="brw__performance__query_8c.html#ad22b6d7509ab2c0c1bb33b973753cca4">dump_perf_query_callback()</a>, <a class="el" href="brw__performance__query_8c.html#a0d8e5e694ef870d8c22fd0ea62fddea5">get_oa_counter_data()</a>, <a class="el" href="brw__performance__query_8c.html#aaed08020b9aae6f2511cb05b163a1512">get_pipeline_stats_data()</a>, and <a class="el" href="brw__performance__query_8c.html#adb4159b6f54c4dcacc11ac5c888854d1">snapshot_statistics_registers()</a>.</p>

</div>
</div>
<a id="a67cbdba2d04675c9a3edc1c2b580e539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67cbdba2d04675c9a3edc1c2b580e539">&sect;&nbsp;</a></span>results_accumulated</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool brw_perf_query_object::results_accumulated</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>false while in the unaccumulated_elements list, and set to true when the final, end MI_RPC snapshot has been accumulated. </p>

</div>
</div>
<a id="a4b0eac7649a5ca3759c745e3030fe487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b0eac7649a5ca3759c745e3030fe487">&sect;&nbsp;</a></span>samples_head</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/glsl.tag:../glsl/" href="../glsl/structexec__node.html">exec_node</a>* brw_perf_query_object::samples_head</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reference the head of the brw-&gt;perfquery.sample_buffers list at the time that the query started (so we only need to look at nodes after this point when looking for samples related to this query) </p>
<p>(See struct <a class="el" href="structbrw__oa__sample__buf.html" title="Periodic OA samples are read() into these buffer structures via the i915 perf kernel interface and ap...">brw_oa_sample_buf</a> description for more details) </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="brw__performance__query_8c.html">brw_performance_query.c</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
