<html>
<head>
<title>Mesa Source Code Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="qindex">
<a class="qindex" href="../main/index.html">core</a> |
<a class="qindex" href="../glapi/index.html">glapi</a> |
<a class="qindex" href="../glsl/index.html">glsl</a> |
<a class="qindex" href="../nir/index.html">nir</a> |
<a class="qindex" href="../vbo/index.html">vbo</a> |
<a class="qindex" href="../math/index.html">math</a> |
<a class="qindex" href="../swrast/index.html">swrast</a> |
<a class="qindex" href="../swrast_setup/index.html">swrast_setup</a> |
<a class="qindex" href="../tnl/index.html">tnl</a> |
<a class="qindex" href="../tnl_dd/index.html">tnl_dd</a> |
<a class="qindex" href="../gbm/index.html">gbm</a> |
<a class="qindex" href="../i965/index.html">i965</a>
</div>
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_9172db528ee902c60f00bbddd6d6be2b.html">mesa</a></li><li class="navelem"><a class="el" href="dir_18c0559f0dc03c9de8793d4f4d9250e0.html">drivers</a></li><li class="navelem"><a class="el" href="dir_f9d2f2c49ee9856d84d18416dd980e1f.html">dri</a></li><li class="navelem"><a class="el" href="dir_402a52f95aa7794c8781e5eebb48eed0.html">i965</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">brw_queryobj.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Support for query objects (GL_ARB_occlusion_query, GL_ARB_timer_query, GL_EXT_transform_feedback, and friends).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/imports__8h.html">main/imports.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__context_8h.html">brw_context.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__defines_8h.html">brw_defines.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__state_8h.html">brw_state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="intel__batchbuffer_8h.html">intel_batchbuffer.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abb07765eb2d9602f20d9f3b098cdfb92"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#abb07765eb2d9602f20d9f3b098cdfb92">brw_timebase_scale</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, uint64_t gpu_timestamp)</td></tr>
<tr class="separator:abb07765eb2d9602f20d9f3b098cdfb92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4d50606da6592a872381d0a29496adc"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#ae4d50606da6592a872381d0a29496adc">brw_raw_timestamp_delta</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, uint64_t time0, uint64_t time1)</td></tr>
<tr class="separator:ae4d50606da6592a872381d0a29496adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fddb7a1e1ab538ec4713039df474a38"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a2fddb7a1e1ab538ec4713039df474a38">brw_write_timestamp</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, drm_intel_bo *query_bo, int idx)</td></tr>
<tr class="memdesc:a2fddb7a1e1ab538ec4713039df474a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emit PIPE_CONTROLs to write the current GPU timestamp into a buffer.  <a href="#a2fddb7a1e1ab538ec4713039df474a38">More...</a><br /></td></tr>
<tr class="separator:a2fddb7a1e1ab538ec4713039df474a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32260ebaeb44b52abac5611ee8272321"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a32260ebaeb44b52abac5611ee8272321">brw_write_depth_count</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, drm_intel_bo *query_bo, int idx)</td></tr>
<tr class="memdesc:a32260ebaeb44b52abac5611ee8272321"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emit PIPE_CONTROLs to write the PS_DEPTH_COUNT register into a buffer.  <a href="#a32260ebaeb44b52abac5611ee8272321">More...</a><br /></td></tr>
<tr class="separator:a32260ebaeb44b52abac5611ee8272321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20f30d32421fe01a193479bf7f7f71a4"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a20f30d32421fe01a193479bf7f7f71a4">brw_queryobj_get_results</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *query)</td></tr>
<tr class="memdesc:a20f30d32421fe01a193479bf7f7f71a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait on the query object's BO and calculate the final result.  <a href="#a20f30d32421fe01a193479bf7f7f71a4">More...</a><br /></td></tr>
<tr class="separator:a20f30d32421fe01a193479bf7f7f71a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f9a5db88fa84725026f5b149c33d152"><td class="memItemLeft" align="right" valign="top">static struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a0f9a5db88fa84725026f5b149c33d152">brw_new_query_object</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/swrast.tag:../swrast/" href="../swrast/s__texfetch__tmp_8h.html#a087030f771e19c7145d9de2db60d773b">GLuint</a> id)</td></tr>
<tr class="memdesc:a0f9a5db88fa84725026f5b149c33d152"><td class="mdescLeft">&#160;</td><td class="mdescRight">The NewQueryObject() driver hook.  <a href="#a0f9a5db88fa84725026f5b149c33d152">More...</a><br /></td></tr>
<tr class="separator:a0f9a5db88fa84725026f5b149c33d152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9584a0c35e10381c5fea055d19a1b372"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a9584a0c35e10381c5fea055d19a1b372">brw_delete_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:a9584a0c35e10381c5fea055d19a1b372"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DeleteQuery() driver hook.  <a href="#a9584a0c35e10381c5fea055d19a1b372">More...</a><br /></td></tr>
<tr class="separator:a9584a0c35e10381c5fea055d19a1b372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2469c290c94b8c6230c6c6c302481402"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a2469c290c94b8c6230c6c6c302481402">brw_begin_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:a2469c290c94b8c6230c6c6c302481402"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gen4-5 driver hook for glBeginQuery().  <a href="#a2469c290c94b8c6230c6c6c302481402">More...</a><br /></td></tr>
<tr class="separator:a2469c290c94b8c6230c6c6c302481402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5855beafb7496307362bdaf8bf07d4f"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#af5855beafb7496307362bdaf8bf07d4f">brw_end_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:af5855beafb7496307362bdaf8bf07d4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gen4-5 driver hook for glEndQuery().  <a href="#af5855beafb7496307362bdaf8bf07d4f">More...</a><br /></td></tr>
<tr class="separator:af5855beafb7496307362bdaf8bf07d4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15ecfc45ae40c198c951edf57946c841"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a15ecfc45ae40c198c951edf57946c841">brw_wait_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:a15ecfc45ae40c198c951edf57946c841"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Gen4-5 WaitQuery() driver hook.  <a href="#a15ecfc45ae40c198c951edf57946c841">More...</a><br /></td></tr>
<tr class="separator:a15ecfc45ae40c198c951edf57946c841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdc9722cdabbfaf7ac04033a48ef48fa"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#afdc9722cdabbfaf7ac04033a48ef48fa">brw_check_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:afdc9722cdabbfaf7ac04033a48ef48fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Gen4-5 CheckQuery() driver hook.  <a href="#afdc9722cdabbfaf7ac04033a48ef48fa">More...</a><br /></td></tr>
<tr class="separator:afdc9722cdabbfaf7ac04033a48ef48fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9876abb0fc1dfec7dc1dfc284145e99"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#ad9876abb0fc1dfec7dc1dfc284145e99">ensure_bo_has_space</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *query)</td></tr>
<tr class="memdesc:ad9876abb0fc1dfec7dc1dfc284145e99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure there query's BO has enough space to store a new pair of values.  <a href="#ad9876abb0fc1dfec7dc1dfc284145e99">More...</a><br /></td></tr>
<tr class="separator:ad9876abb0fc1dfec7dc1dfc284145e99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f30b5a23ad6d92fa7fe9ec41e761bc4"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a0f30b5a23ad6d92fa7fe9ec41e761bc4">brw_emit_query_begin</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw)</td></tr>
<tr class="memdesc:a0f30b5a23ad6d92fa7fe9ec41e761bc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record the PS_DEPTH_COUNT value (for occlusion queries) just before primitive drawing.  <a href="#a0f30b5a23ad6d92fa7fe9ec41e761bc4">More...</a><br /></td></tr>
<tr class="separator:a0f30b5a23ad6d92fa7fe9ec41e761bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af652618f72e9d0215d544d07eb71c0c1"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#af652618f72e9d0215d544d07eb71c0c1">brw_emit_query_end</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw)</td></tr>
<tr class="memdesc:af652618f72e9d0215d544d07eb71c0c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called at batchbuffer flush to get an ending PS_DEPTH_COUNT (for non-hardware context platforms).  <a href="#af652618f72e9d0215d544d07eb71c0c1">More...</a><br /></td></tr>
<tr class="separator:af652618f72e9d0215d544d07eb71c0c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88fe16984744aeecf1cd682d3c924557"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a88fe16984744aeecf1cd682d3c924557">brw_query_counter</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:a88fe16984744aeecf1cd682d3c924557"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver hook for glQueryCounter().  <a href="#a88fe16984744aeecf1cd682d3c924557">More...</a><br /></td></tr>
<tr class="separator:a88fe16984744aeecf1cd682d3c924557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b195238331cd633124323b2402fe3c0"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a1b195238331cd633124323b2402fe3c0">brw_get_timestamp</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx)</td></tr>
<tr class="memdesc:a1b195238331cd633124323b2402fe3c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the TIMESTAMP register immediately (in a non-pipelined fashion).  <a href="#a1b195238331cd633124323b2402fe3c0">More...</a><br /></td></tr>
<tr class="separator:a1b195238331cd633124323b2402fe3c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5941efa7399eefa1546c438b7e45cc6a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a5941efa7399eefa1546c438b7e45cc6a">brw_is_query_pipelined</a> (struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *query)</td></tr>
<tr class="memdesc:a5941efa7399eefa1546c438b7e45cc6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this type of query written by PIPE_CONTROL?  <a href="#a5941efa7399eefa1546c438b7e45cc6a">More...</a><br /></td></tr>
<tr class="separator:a5941efa7399eefa1546c438b7e45cc6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2237597839680ddfac5d8ac5e7c50e67"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a2237597839680ddfac5d8ac5e7c50e67">brw_init_common_queryobj_functions</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html">dd_function_table</a> *functions)</td></tr>
<tr class="separator:a2237597839680ddfac5d8ac5e7c50e67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10d0de95676273ef910986df200cf156"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="brw__queryobj_8c.html#a10d0de95676273ef910986df200cf156">gen4_init_queryobj_functions</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html">dd_function_table</a> *functions)</td></tr>
<tr class="separator:a10d0de95676273ef910986df200cf156"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support for query objects (GL_ARB_occlusion_query, GL_ARB_timer_query, GL_EXT_transform_feedback, and friends). </p>
<p>The hardware provides a PIPE_CONTROL command that can report the number of fragments that passed the depth test, or the hardware timer. They are appropriately synced with the stage of the pipeline for our extensions' needs. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2469c290c94b8c6230c6c6c302481402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2469c290c94b8c6230c6c6c302481402">&sect;&nbsp;</a></span>brw_begin_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_begin_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gen4-5 driver hook for glBeginQuery(). </p>
<p>Initializes driver structures and emits any GPU commands required to begin recording data for the query. </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__context_8h.html#aab3af547b6b8c3f172e0413c55c50eaf">BRW_NEW_STATS_WM</a>, <a class="el" href="brw__queryobj_8c.html#a2fddb7a1e1ab538ec4713039df474a38">brw_write_timestamp()</a>, <a class="el" href="structbrw__context.html#a09b215d26b759d54ed8f2f9c65f12ba8">brw_context::bufmgr</a>, <a class="el" href="structbrw__context.html#a88c20917f04c226b48929a0e78e30ae2">brw_context::ctx</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="structbrw__query__object.html#ae6f80bec23d8adab2413b615d522cd38">brw_query_object::last_index</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#afcdc987c5895053ecd784a2213462b3e">gl_context::NewDriverState</a>, <a class="el" href="structbrw__context.html#a0026d80e407531b4f2c3498c9df81130">brw_context::obj</a>, <a class="el" href="structbrw__context.html#adb539d2e627fb5b6ccf2928154beacfd">brw_context::query</a>, <a class="el" href="structbrw__context.html#a29f57541b2032b4d1fac6bfb60842b93">brw_context::stats_wm</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b8af5a152361cbab9510efac6aea8d5">gl_query_object::Target</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a10d0de95676273ef910986df200cf156">gen4_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="afdc9722cdabbfaf7ac04033a48ef48fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdc9722cdabbfaf7ac04033a48ef48fa">&sect;&nbsp;</a></span>brw_check_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_check_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Gen4-5 CheckQuery() driver hook. </p>
<p>Checks whether a query result is ready yet. If not, flushes. This is the backing for glGetQueryObjectiv()'s QUERY_RESULT_AVAILABLE pname. </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="el" href="structbrw__context.html#aee33040c7b0ca50d9f8713eaa31855e5">brw_context::batch</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="structintel__batchbuffer.html#ad06131dbf7b8ef92ccceec9dbebea2cb">intel_batchbuffer::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__queryobj_8c.html#a20f30d32421fe01a193479bf7f7f71a4">brw_queryobj_get_results()</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="intel__batchbuffer_8h.html#a681261463bd88c7758869dee5ebefac7">intel_batchbuffer_flush</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b23f69be0c466a0c80f6a2e441a6e43">gl_query_object::Ready</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a10d0de95676273ef910986df200cf156">gen4_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a9584a0c35e10381c5fea055d19a1b372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9584a0c35e10381c5fea055d19a1b372">&sect;&nbsp;</a></span>brw_delete_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_delete_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The DeleteQuery() driver hook. </p>

<p>References <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a2237597839680ddfac5d8ac5e7c50e67">brw_init_common_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a0f30b5a23ad6d92fa7fe9ec41e761bc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f30b5a23ad6d92fa7fe9ec41e761bc4">&sect;&nbsp;</a></span>brw_emit_query_begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_emit_query_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Record the PS_DEPTH_COUNT value (for occlusion queries) just before primitive drawing. </p>
<p>In a pre-hardware context world, the single PS_DEPTH_COUNT register is shared among all applications using the GPU. However, our query value needs to only include fragments generated by our application/GL context.</p>
<p>To accommodate this, we record PS_DEPTH_COUNT at the start and end of each batchbuffer (technically, the first primitive drawn and flush time). Subtracting each pair of values calculates the change in PS_DEPTH_COUNT caused by a batchbuffer. Since there is no preemption inside batches, this is guaranteed to only measure the effects of our current application.</p>
<p>Adding each of these differences (in case drawing is done over many batches) produces the final expected value.</p>
<p>In a world with hardware contexts, PS_DEPTH_COUNT is saved and restored as part of the context state, so this is unnecessary, and skipped. </p>

<p>References <a class="el" href="structbrw__context.html#a42eeadfae10556c1fbbbbb34a7492c25">brw_context::begin_emitted</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__queryobj_8c.html#a32260ebaeb44b52abac5611ee8272321">brw_write_depth_count()</a>, <a class="el" href="structbrw__context.html#a88c20917f04c226b48929a0e78e30ae2">brw_context::ctx</a>, <a class="el" href="brw__queryobj_8c.html#ad9876abb0fc1dfec7dc1dfc284145e99">ensure_bo_has_space()</a>, <a class="el" href="structbrw__context.html#aedfffdd30ec0576ef61cfe3ae008eb70">brw_context::hw_ctx</a>, <a class="el" href="structbrw__query__object.html#ae6f80bec23d8adab2413b615d522cd38">brw_query_object::last_index</a>, <a class="el" href="structbrw__context.html#a0026d80e407531b4f2c3498c9df81130">brw_context::obj</a>, and <a class="el" href="structbrw__context.html#adb539d2e627fb5b6ccf2928154beacfd">brw_context::query</a>.</p>

<p>Referenced by <a class="el" href="brw__draw__upload_8c.html#ae0637b2e69edc355abd63bad9fc6230b">brw_emit_vertices()</a>, and <a class="el" href="brw__queryobj_8c.html#af5855beafb7496307362bdaf8bf07d4f">brw_end_query()</a>.</p>

</div>
</div>
<a id="af652618f72e9d0215d544d07eb71c0c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af652618f72e9d0215d544d07eb71c0c1">&sect;&nbsp;</a></span>brw_emit_query_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_emit_query_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called at batchbuffer flush to get an ending PS_DEPTH_COUNT (for non-hardware context platforms). </p>
<p>See the explanation in <a class="el" href="brw__queryobj_8c.html#a0f30b5a23ad6d92fa7fe9ec41e761bc4" title="Record the PS_DEPTH_COUNT value (for occlusion queries) just before primitive drawing. ">brw_emit_query_begin()</a>. </p>

<p>References <a class="el" href="structbrw__context.html#a42eeadfae10556c1fbbbbb34a7492c25">brw_context::begin_emitted</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__queryobj_8c.html#a32260ebaeb44b52abac5611ee8272321">brw_write_depth_count()</a>, <a class="el" href="structbrw__context.html#aedfffdd30ec0576ef61cfe3ae008eb70">brw_context::hw_ctx</a>, <a class="el" href="structbrw__query__object.html#ae6f80bec23d8adab2413b615d522cd38">brw_query_object::last_index</a>, <a class="el" href="structbrw__context.html#a0026d80e407531b4f2c3498c9df81130">brw_context::obj</a>, and <a class="el" href="structbrw__context.html#adb539d2e627fb5b6ccf2928154beacfd">brw_context::query</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#af5855beafb7496307362bdaf8bf07d4f">brw_end_query()</a>, and <a class="el" href="intel__batchbuffer_8c.html#a65777dd5ff303b77fa6358c7a2257039">brw_finish_batch()</a>.</p>

</div>
</div>
<a id="af5855beafb7496307362bdaf8bf07d4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5855beafb7496307362bdaf8bf07d4f">&sect;&nbsp;</a></span>brw_end_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_end_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gen4-5 driver hook for glEndQuery(). </p>
<p>Emits GPU commands to record a final query value, ending any data capturing. However, the final result isn't necessarily available until the GPU processes those commands. <a class="el" href="brw__queryobj_8c.html#a20f30d32421fe01a193479bf7f7f71a4" title="Wait on the query object&#39;s BO and calculate the final result. ">brw_queryobj_get_results()</a> processes the captured data to produce the final result. </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__queryobj_8c.html#a0f30b5a23ad6d92fa7fe9ec41e761bc4">brw_emit_query_begin()</a>, <a class="el" href="brw__queryobj_8c.html#af652618f72e9d0215d544d07eb71c0c1">brw_emit_query_end()</a>, <a class="el" href="brw__context_8h.html#aab3af547b6b8c3f172e0413c55c50eaf">BRW_NEW_STATS_WM</a>, <a class="el" href="brw__queryobj_8c.html#a2fddb7a1e1ab538ec4713039df474a38">brw_write_timestamp()</a>, <a class="el" href="structbrw__context.html#a88c20917f04c226b48929a0e78e30ae2">brw_context::ctx</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#afcdc987c5895053ecd784a2213462b3e">gl_context::NewDriverState</a>, <a class="el" href="structbrw__context.html#a0026d80e407531b4f2c3498c9df81130">brw_context::obj</a>, <a class="el" href="structbrw__context.html#adb539d2e627fb5b6ccf2928154beacfd">brw_context::query</a>, <a class="el" href="structbrw__context.html#a29f57541b2032b4d1fac6bfb60842b93">brw_context::stats_wm</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b8af5a152361cbab9510efac6aea8d5">gl_query_object::Target</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a10d0de95676273ef910986df200cf156">gen4_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a1b195238331cd633124323b2402fe3c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b195238331cd633124323b2402fe3c0">&sect;&nbsp;</a></span>brw_get_timestamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t brw_get_timestamp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the TIMESTAMP register immediately (in a non-pipelined fashion). </p>
<p>This is used to implement the GetTimestamp() driver hook. </p>

<p>References <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__queryobj_8c.html#abb07765eb2d9602f20d9f3b098cdfb92">brw_timebase_scale()</a>, <a class="el" href="structbrw__context.html#a09b215d26b759d54ed8f2f9c65f12ba8">brw_context::bufmgr</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#a225ea8c45facc3040c10c9460e031c04">gl_context::Const</a>, <a class="el" href="structintel__screen.html#a89a00d2767694072826de420653dc468">intel_screen::hw_has_timestamp</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__constants.html#aab52b43ee083fa59386f7737d96a23f5">gl_constants::QueryCounterBits</a>, <a class="el" href="structbrw__context.html#afbbeb704f8852a35d64bfa30b06757ed">brw_context::screen</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__constants.html#a75613c0cd9b5bdd080c6bbe30f60f620">gl_constants::Timestamp</a>, and <a class="el" href="brw__defines_8h.html#ac59bf49f337079e65fe54acbfa21977e">TIMESTAMP</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a2237597839680ddfac5d8ac5e7c50e67">brw_init_common_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a2237597839680ddfac5d8ac5e7c50e67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2237597839680ddfac5d8ac5e7c50e67">&sect;&nbsp;</a></span>brw_init_common_queryobj_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_init_common_queryobj_functions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html">dd_function_table</a> *&#160;</td>
          <td class="paramname"><em>functions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="brw__queryobj_8c.html#a9584a0c35e10381c5fea055d19a1b372">brw_delete_query()</a>, <a class="el" href="brw__queryobj_8c.html#a1b195238331cd633124323b2402fe3c0">brw_get_timestamp()</a>, <a class="el" href="brw__queryobj_8c.html#a0f9a5db88fa84725026f5b149c33d152">brw_new_query_object()</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a3a4873d39812c836671ca3873127b2d6">dd_function_table::DeleteQuery</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a8075fb971113e6558316265f092b2055">dd_function_table::GetTimestamp</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a08b604df50ca9d8636dcfe2e9b15fe63">dd_function_table::NewQueryObject</a>.</p>

<p>Referenced by <a class="el" href="brw__context_8c.html#ab670ec47d2c02db29495492708be9e2c">brw_init_driver_functions()</a>.</p>

</div>
</div>
<a id="a5941efa7399eefa1546c438b7e45cc6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5941efa7399eefa1546c438b7e45cc6a">&sect;&nbsp;</a></span>brw_is_query_pipelined()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool brw_is_query_pipelined </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is this type of query written by PIPE_CONTROL? </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b8af5a152361cbab9510efac6aea8d5">gl_query_object::Target</a>.</p>

<p>Referenced by <a class="el" href="hsw__queryobj_8c.html#a0d6854b726f8f8837baccefc3846644b">hsw_store_query_result()</a>, and <a class="el" href="gen6__queryobj_8c.html#ac6c370969bb193976403bac7740be8d7">set_query_availability()</a>.</p>

</div>
</div>
<a id="a0f9a5db88fa84725026f5b149c33d152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f9a5db88fa84725026f5b149c33d152">&sect;&nbsp;</a></span>brw_new_query_object()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a>* brw_new_query_object </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/swrast.tag:../swrast/" href="../swrast/s__texfetch__tmp_8h.html#a087030f771e19c7145d9de2db60d773b">GLuint</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The NewQueryObject() driver hook. </p>
<p>Allocates and initializes a new query object. </p>

<p>References <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#ac183a647aa685df8a21f32975ed71689">gl_query_object::Active</a>, <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#af178996bfae7e93e84b4439bcb788a98">gl_query_object::Id</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b23f69be0c466a0c80f6a2e441a6e43">gl_query_object::Ready</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a77b53ea793b0ecf0a93712ef55721012">gl_query_object::Result</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a2237597839680ddfac5d8ac5e7c50e67">brw_init_common_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a88fe16984744aeecf1cd682d3c924557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88fe16984744aeecf1cd682d3c924557">&sect;&nbsp;</a></span>brw_query_counter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_query_counter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Driver hook for glQueryCounter(). </p>
<p>This handles GL_TIMESTAMP queries, which perform a pipelined read of the current GPU time. This is unlike GL_TIME_ELAPSED, which measures the time while the query is active. </p>

<p>References <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__queryobj_8c.html#a2fddb7a1e1ab538ec4713039df474a38">brw_write_timestamp()</a>, <a class="el" href="structbrw__context.html#a09b215d26b759d54ed8f2f9c65f12ba8">brw_context::bufmgr</a>, <a class="el" href="structbrw__query__object.html#a15d97518e4f675cca5888a07998ff537">brw_query_object::flushed</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b8af5a152361cbab9510efac6aea8d5">gl_query_object::Target</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a10d0de95676273ef910986df200cf156">gen4_init_queryobj_functions()</a>, and <a class="el" href="gen6__queryobj_8c.html#ae5ebfc712776c1ac0b3142c29b4b0beb">gen6_query_counter()</a>.</p>

</div>
</div>
<a id="a20f30d32421fe01a193479bf7f7f71a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20f30d32421fe01a193479bf7f7f71a4">&sect;&nbsp;</a></span>brw_queryobj_get_results()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_queryobj_get_results </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait on the query object's BO and calculate the final result. </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="el" href="structbrw__context.html#aee33040c7b0ca50d9f8713eaa31855e5">brw_context::batch</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="structintel__batchbuffer.html#ad06131dbf7b8ef92ccceec9dbebea2cb">intel_batchbuffer::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__queryobj_8c.html#ae4d50606da6592a872381d0a29496adc">brw_raw_timestamp_delta()</a>, <a class="el" href="brw__queryobj_8c.html#abb07765eb2d9602f20d9f3b098cdfb92">brw_timebase_scale()</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#a225ea8c45facc3040c10c9460e031c04">gl_context::Const</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="intel__batchbuffer_8h.html#a681261463bd88c7758869dee5ebefac7">intel_batchbuffer_flush</a>, <a class="el" href="structbrw__query__object.html#ae6f80bec23d8adab2413b615d522cd38">brw_query_object::last_index</a>, <a class="el" href="structbrw__context.html#ae8c861ce87085759ec97923b5e91732a">brw_context::perf_debug</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__constants.html#aab52b43ee083fa59386f7737d96a23f5">gl_constants::QueryCounterBits</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a77b53ea793b0ecf0a93712ef55721012">gl_query_object::Result</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b8af5a152361cbab9510efac6aea8d5">gl_query_object::Target</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__constants.html#a75613c0cd9b5bdd080c6bbe30f60f620">gl_constants::Timestamp</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#afdc9722cdabbfaf7ac04033a48ef48fa">brw_check_query()</a>, <a class="el" href="brw__queryobj_8c.html#a15ecfc45ae40c198c951edf57946c841">brw_wait_query()</a>, and <a class="el" href="brw__queryobj_8c.html#ad9876abb0fc1dfec7dc1dfc284145e99">ensure_bo_has_space()</a>.</p>

</div>
</div>
<a id="ae4d50606da6592a872381d0a29496adc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4d50606da6592a872381d0a29496adc">&sect;&nbsp;</a></span>brw_raw_timestamp_delta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t brw_raw_timestamp_delta </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>time0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>time1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="structintel__screen.html#a89a00d2767694072826de420653dc468">intel_screen::hw_has_timestamp</a>, and <a class="el" href="structbrw__context.html#afbbeb704f8852a35d64bfa30b06757ed">brw_context::screen</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a20f30d32421fe01a193479bf7f7f71a4">brw_queryobj_get_results()</a>, and <a class="el" href="gen6__queryobj_8c.html#ae5f09c8f0bbdab08eab62218118e8736">gen6_queryobj_get_results()</a>.</p>

</div>
</div>
<a id="abb07765eb2d9602f20d9f3b098cdfb92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb07765eb2d9602f20d9f3b098cdfb92">&sect;&nbsp;</a></span>brw_timebase_scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t brw_timebase_scale </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>gpu_timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="structintel__screen.html#a754bdfd5d66f3a9a72478892ca841ab6">intel_screen::devinfo</a>, and <a class="el" href="structbrw__context.html#afbbeb704f8852a35d64bfa30b06757ed">brw_context::screen</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a1b195238331cd633124323b2402fe3c0">brw_get_timestamp()</a>, <a class="el" href="brw__queryobj_8c.html#a20f30d32421fe01a193479bf7f7f71a4">brw_queryobj_get_results()</a>, and <a class="el" href="gen6__queryobj_8c.html#ae5f09c8f0bbdab08eab62218118e8736">gen6_queryobj_get_results()</a>.</p>

</div>
</div>
<a id="a15ecfc45ae40c198c951edf57946c841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15ecfc45ae40c198c951edf57946c841">&sect;&nbsp;</a></span>brw_wait_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_wait_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Gen4-5 WaitQuery() driver hook. </p>
<p>Wait for a query result to become available and return it. This is the backing for glGetQueryObjectiv() with the GL_QUERY_RESULT pname. </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__queryobj_8c.html#a20f30d32421fe01a193479bf7f7f71a4">brw_queryobj_get_results()</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b23f69be0c466a0c80f6a2e441a6e43">gl_query_object::Ready</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a10d0de95676273ef910986df200cf156">gen4_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a32260ebaeb44b52abac5611ee8272321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32260ebaeb44b52abac5611ee8272321">&sect;&nbsp;</a></span>brw_write_depth_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_write_depth_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">drm_intel_bo *&#160;</td>
          <td class="paramname"><em>query_bo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emit PIPE_CONTROLs to write the PS_DEPTH_COUNT register into a buffer. </p>

<p>References <a class="el" href="brw__context_8h.html#a61e9ae0442c7f6b83f6b2f802c3768c1">brw_emit_pipe_control_write()</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="structbrw__context.html#abba45ace12dbf82fff80036fca211ae6">brw_context::gt</a>, <a class="el" href="brw__defines_8h.html#a4fc4c73e254fe72d35ec46d615e2366c">PIPE_CONTROL_CS_STALL</a>, <a class="el" href="brw__defines_8h.html#ad6796d56c1458ec8e4d8640c15602172">PIPE_CONTROL_DEPTH_STALL</a>, and <a class="el" href="brw__defines_8h.html#a50990303316920ad65d4ea93e3d4a35e">PIPE_CONTROL_WRITE_DEPTH_COUNT</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a0f30b5a23ad6d92fa7fe9ec41e761bc4">brw_emit_query_begin()</a>, <a class="el" href="brw__queryobj_8c.html#af652618f72e9d0215d544d07eb71c0c1">brw_emit_query_end()</a>, <a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query()</a>.</p>

</div>
</div>
<a id="a2fddb7a1e1ab538ec4713039df474a38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fddb7a1e1ab538ec4713039df474a38">&sect;&nbsp;</a></span>brw_write_timestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> brw_write_timestamp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">drm_intel_bo *&#160;</td>
          <td class="paramname"><em>query_bo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emit PIPE_CONTROLs to write the current GPU timestamp into a buffer. </p>

<p>References <a class="el" href="brw__context_8h.html#a0b43a6d4e729b2f9eeadd67f9fae8c62">brw_emit_pipe_control_flush()</a>, <a class="el" href="brw__context_8h.html#a61e9ae0442c7f6b83f6b2f802c3768c1">brw_emit_pipe_control_write()</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="structbrw__context.html#abba45ace12dbf82fff80036fca211ae6">brw_context::gt</a>, <a class="el" href="brw__defines_8h.html#a4fc4c73e254fe72d35ec46d615e2366c">PIPE_CONTROL_CS_STALL</a>, <a class="el" href="brw__defines_8h.html#ae1da3a17865ba912935bbb27c6fd113a">PIPE_CONTROL_STALL_AT_SCOREBOARD</a>, and <a class="el" href="brw__defines_8h.html#a4ccab702c4c9f9fd50086a2ab4323cf7">PIPE_CONTROL_WRITE_TIMESTAMP</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a2469c290c94b8c6230c6c6c302481402">brw_begin_query()</a>, <a class="el" href="brw__queryobj_8c.html#af5855beafb7496307362bdaf8bf07d4f">brw_end_query()</a>, <a class="el" href="brw__queryobj_8c.html#a88fe16984744aeecf1cd682d3c924557">brw_query_counter()</a>, <a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query()</a>.</p>

</div>
</div>
<a id="ad9876abb0fc1dfec7dc1dfc284145e99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9876abb0fc1dfec7dc1dfc284145e99">&sect;&nbsp;</a></span>ensure_bo_has_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> ensure_bo_has_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure there query's BO has enough space to store a new pair of values. </p>
<p>If not, gather the existing BO's results and create a new buffer of the same size. </p>

<p>References <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__queryobj_8c.html#a20f30d32421fe01a193479bf7f7f71a4">brw_queryobj_get_results()</a>, <a class="el" href="structbrw__context.html#a09b215d26b759d54ed8f2f9c65f12ba8">brw_context::bufmgr</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, and <a class="el" href="structbrw__query__object.html#ae6f80bec23d8adab2413b615d522cd38">brw_query_object::last_index</a>.</p>

<p>Referenced by <a class="el" href="brw__queryobj_8c.html#a0f30b5a23ad6d92fa7fe9ec41e761bc4">brw_emit_query_begin()</a>.</p>

</div>
</div>
<a id="a10d0de95676273ef910986df200cf156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10d0de95676273ef910986df200cf156">&sect;&nbsp;</a></span>gen4_init_queryobj_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen4_init_queryobj_functions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html">dd_function_table</a> *&#160;</td>
          <td class="paramname"><em>functions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a03c0d1e1692e47728f27a84934042bc2">dd_function_table::BeginQuery</a>, <a class="el" href="brw__queryobj_8c.html#a2469c290c94b8c6230c6c6c302481402">brw_begin_query()</a>, <a class="el" href="brw__queryobj_8c.html#afdc9722cdabbfaf7ac04033a48ef48fa">brw_check_query()</a>, <a class="el" href="brw__queryobj_8c.html#af5855beafb7496307362bdaf8bf07d4f">brw_end_query()</a>, <a class="el" href="brw__queryobj_8c.html#a88fe16984744aeecf1cd682d3c924557">brw_query_counter()</a>, <a class="el" href="brw__queryobj_8c.html#a15ecfc45ae40c198c951edf57946c841">brw_wait_query()</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a1cba6a762440ecd2a7b5d35fd51879d2">dd_function_table::CheckQuery</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a519202bac56fe708e9ea5e0994ccc4ee">dd_function_table::EndQuery</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a0d392ddc8de12006254d41ab7eb831a5">dd_function_table::QueryCounter</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#afb83cdd7583bceb1e7012e54d6a310dd">dd_function_table::WaitQuery</a>.</p>

<p>Referenced by <a class="el" href="brw__context_8c.html#ab670ec47d2c02db29495492708be9e2c">brw_init_driver_functions()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
