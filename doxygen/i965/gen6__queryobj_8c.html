<html>
<head>
<title>Mesa Source Code Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="qindex">
<a class="qindex" href="../main/index.html">core</a> |
<a class="qindex" href="../glapi/index.html">glapi</a> |
<a class="qindex" href="../glsl/index.html">glsl</a> |
<a class="qindex" href="../nir/index.html">nir</a> |
<a class="qindex" href="../vbo/index.html">vbo</a> |
<a class="qindex" href="../math/index.html">math</a> |
<a class="qindex" href="../swrast/index.html">swrast</a> |
<a class="qindex" href="../swrast_setup/index.html">swrast_setup</a> |
<a class="qindex" href="../tnl/index.html">tnl</a> |
<a class="qindex" href="../tnl_dd/index.html">tnl_dd</a> |
<a class="qindex" href="../gbm/index.html">gbm</a> |
<a class="qindex" href="../i965/index.html">i965</a>
</div>
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_9172db528ee902c60f00bbddd6d6be2b.html">mesa</a></li><li class="navelem"><a class="el" href="dir_18c0559f0dc03c9de8793d4f4d9250e0.html">drivers</a></li><li class="navelem"><a class="el" href="dir_f9d2f2c49ee9856d84d18416dd980e1f.html">dri</a></li><li class="navelem"><a class="el" href="dir_402a52f95aa7794c8781e5eebb48eed0.html">i965</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">gen6_queryobj.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Support for query objects (GL_ARB_occlusion_query, GL_ARB_timer_query, GL_EXT_transform_feedback, and friends) on platforms that support hardware contexts (Gen6+).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/imports__8h.html">main/imports.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__context_8h.html">brw_context.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__defines_8h.html">brw_defines.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__state_8h.html">brw_state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="intel__batchbuffer_8h.html">intel_batchbuffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="intel__buffer__objects_8h.html">intel_buffer_objects.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac6c370969bb193976403bac7740be8d7"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#ac6c370969bb193976403bac7740be8d7">set_query_availability</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *query, bool available)</td></tr>
<tr class="separator:ac6c370969bb193976403bac7740be8d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2713d325b98d954a0a08b8c4fe22bab3"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#a2713d325b98d954a0a08b8c4fe22bab3">write_primitives_generated</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, drm_intel_bo *query_bo, int stream, int idx)</td></tr>
<tr class="separator:a2713d325b98d954a0a08b8c4fe22bab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c02fe5493c659326cce16402e078da4"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#a7c02fe5493c659326cce16402e078da4">write_xfb_primitives_written</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, drm_intel_bo *bo, int stream, int idx)</td></tr>
<tr class="separator:a7c02fe5493c659326cce16402e078da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a231e7fa92e207fbc30d0df1241ac9a"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#a8a231e7fa92e207fbc30d0df1241ac9a">write_xfb_overflow_streams</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, drm_intel_bo *bo, int stream, int count, int idx)</td></tr>
<tr class="separator:a8a231e7fa92e207fbc30d0df1241ac9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ffd95c5d4f9ed2da2c57081b82e535"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#ad1ffd95c5d4f9ed2da2c57081b82e535">check_xfb_overflow_streams</a> (uint64_t *results, int count)</td></tr>
<tr class="separator:ad1ffd95c5d4f9ed2da2c57081b82e535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44934083fd2ddaf217b94ccb2601ed9c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#a44934083fd2ddaf217b94ccb2601ed9c">pipeline_target_to_index</a> (int target)</td></tr>
<tr class="separator:a44934083fd2ddaf217b94ccb2601ed9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ca67a331ba671ff8b8c9e22de720bb"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#ad2ca67a331ba671ff8b8c9e22de720bb">emit_pipeline_stat</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, drm_intel_bo *bo, int stream, int target, int idx)</td></tr>
<tr class="separator:ad2ca67a331ba671ff8b8c9e22de720bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f09c8f0bbdab08eab62218118e8736"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#ae5f09c8f0bbdab08eab62218118e8736">gen6_queryobj_get_results</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *query)</td></tr>
<tr class="memdesc:ae5f09c8f0bbdab08eab62218118e8736"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait on the query object's BO and calculate the final result.  <a href="#ae5f09c8f0bbdab08eab62218118e8736">More...</a><br /></td></tr>
<tr class="separator:ae5f09c8f0bbdab08eab62218118e8736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d7de107b76e535d48c792425ca11832"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:a8d7de107b76e535d48c792425ca11832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver hook for glBeginQuery().  <a href="#a8d7de107b76e535d48c792425ca11832">More...</a><br /></td></tr>
<tr class="separator:a8d7de107b76e535d48c792425ca11832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3e28bb9058fe2fdf3b388a39b18b92f"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:ad3e28bb9058fe2fdf3b388a39b18b92f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver hook for glEndQuery().  <a href="#ad3e28bb9058fe2fdf3b388a39b18b92f">More...</a><br /></td></tr>
<tr class="separator:ad3e28bb9058fe2fdf3b388a39b18b92f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a711322ef0fe4e49b82961533d660c1b6"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#a711322ef0fe4e49b82961533d660c1b6">flush_batch_if_needed</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *query)</td></tr>
<tr class="memdesc:a711322ef0fe4e49b82961533d660c1b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the batch if it still references the query object BO.  <a href="#a711322ef0fe4e49b82961533d660c1b6">More...</a><br /></td></tr>
<tr class="separator:a711322ef0fe4e49b82961533d660c1b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac667af1e65361ef31e4f82e235d3b210"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#ac667af1e65361ef31e4f82e235d3b210">gen6_wait_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:ac667af1e65361ef31e4f82e235d3b210"><td class="mdescLeft">&#160;</td><td class="mdescRight">The WaitQuery() driver hook.  <a href="#ac667af1e65361ef31e4f82e235d3b210">More...</a><br /></td></tr>
<tr class="separator:ac667af1e65361ef31e4f82e235d3b210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a265f161f71a5f425c975c13e249ea442"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#a265f161f71a5f425c975c13e249ea442">gen6_check_query</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="memdesc:a265f161f71a5f425c975c13e249ea442"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CheckQuery() driver hook.  <a href="#a265f161f71a5f425c975c13e249ea442">More...</a><br /></td></tr>
<tr class="separator:a265f161f71a5f425c975c13e249ea442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ebfc712776c1ac0b3142c29b4b0beb"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#ae5ebfc712776c1ac0b3142c29b4b0beb">gen6_query_counter</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *ctx, struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *q)</td></tr>
<tr class="separator:ae5ebfc712776c1ac0b3142c29b4b0beb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95aabfaef4b42fa400d28a02a87376d4"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__queryobj_8c.html#a95aabfaef4b42fa400d28a02a87376d4">gen6_init_queryobj_functions</a> (struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html">dd_function_table</a> *functions)</td></tr>
<tr class="memdesc:a95aabfaef4b42fa400d28a02a87376d4"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="gen6__queryobj_8c.html" title="Support for query objects (GL_ARB_occlusion_query, GL_ARB_timer_query, GL_EXT_transform_feedback, and friends) on platforms that support hardware contexts (Gen6+). ">gen6_queryobj.c</a>  <a href="#a95aabfaef4b42fa400d28a02a87376d4">More...</a><br /></td></tr>
<tr class="separator:a95aabfaef4b42fa400d28a02a87376d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support for query objects (GL_ARB_occlusion_query, GL_ARB_timer_query, GL_EXT_transform_feedback, and friends) on platforms that support hardware contexts (Gen6+). </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad1ffd95c5d4f9ed2da2c57081b82e535"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1ffd95c5d4f9ed2da2c57081b82e535">&sect;&nbsp;</a></span>check_xfb_overflow_streams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_xfb_overflow_streams </td>
          <td>(</td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#ae5f09c8f0bbdab08eab62218118e8736">gen6_queryobj_get_results()</a>.</p>

</div>
</div>
<a id="ad2ca67a331ba671ff8b8c9e22de720bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ca67a331ba671ff8b8c9e22de720bb">&sect;&nbsp;</a></span>emit_pipeline_stat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> emit_pipeline_stat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">drm_intel_bo *&#160;</td>
          <td class="paramname"><em>bo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="brw__context_8h.html#aaad4a2728d541a3f27b06e2ce5a09c7d">brw_emit_mi_flush()</a>, <a class="el" href="brw__context_8h.html#ac9126dcaea8cbc8637d2b0d7666d84ef">brw_store_register_mem64()</a>, <a class="el" href="brw__defines_8h.html#a2d0e0ae0294f63175347827ea8cca846">CL_INVOCATION_COUNT</a>, <a class="el" href="brw__defines_8h.html#a235f78d3fd7d3e05cb8743b676c39582">CL_PRIMITIVES_COUNT</a>, <a class="el" href="brw__defines_8h.html#ac7a367a725f0720dff894859b3ffbf52">CS_INVOCATION_COUNT</a>, <a class="el" href="brw__defines_8h.html#af020b2deca1f6a5fa94f4f611ded6c91">DS_INVOCATION_COUNT</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="brw__defines_8h.html#acddb53df9bcf3caa96a60a93e976e49a">GS_INVOCATION_COUNT</a>, <a class="el" href="brw__defines_8h.html#a11975ae656145ec3e5b20b4ba973b93d">GS_PRIMITIVES_COUNT</a>, <a class="el" href="brw__defines_8h.html#a72bc75505adc3779a6711594b6f59774">HS_INVOCATION_COUNT</a>, <a class="el" href="brw__defines_8h.html#ab06702e98c253c6d8abd15a340d90cf0">IA_PRIMITIVES_COUNT</a>, <a class="el" href="brw__defines_8h.html#a03295cbd62a41eed955b1d28608672d9">IA_VERTICES_COUNT</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/config_8h.html#a62ffc296b13481279ca8bcf44e75f9d4">MAX_PIPELINE_STATISTICS</a>, <a class="el" href="gen6__queryobj_8c.html#a44934083fd2ddaf217b94ccb2601ed9c">pipeline_target_to_index()</a>, <a class="el" href="brw__defines_8h.html#adb1fc76aed7b5a4d1aee2866b4b6e9af">PS_INVOCATION_COUNT</a>, and <a class="el" href="brw__defines_8h.html#ac463b9ec0ce44d8705c14498ada863c9">VS_INVOCATION_COUNT</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query()</a>.</p>

</div>
</div>
<a id="a711322ef0fe4e49b82961533d660c1b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a711322ef0fe4e49b82961533d660c1b6">&sect;&nbsp;</a></span>flush_batch_if_needed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> flush_batch_if_needed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flush the batch if it still references the query object BO. </p>

<p>References <a class="el" href="structbrw__context.html#aee33040c7b0ca50d9f8713eaa31855e5">brw_context::batch</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="structintel__batchbuffer.html#ad06131dbf7b8ef92ccceec9dbebea2cb">intel_batchbuffer::bo</a>, <a class="el" href="structbrw__query__object.html#a15d97518e4f675cca5888a07998ff537">brw_query_object::flushed</a>, and <a class="el" href="intel__batchbuffer_8h.html#a681261463bd88c7758869dee5ebefac7">intel_batchbuffer_flush</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a265f161f71a5f425c975c13e249ea442">gen6_check_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ac667af1e65361ef31e4f82e235d3b210">gen6_wait_query()</a>.</p>

</div>
</div>
<a id="a8d7de107b76e535d48c792425ca11832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d7de107b76e535d48c792425ca11832">&sect;&nbsp;</a></span>gen6_begin_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen6_begin_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Driver hook for glBeginQuery(). </p>
<p>Initializes driver structures and emits any GPU commands required to begin recording data for the query. </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__context_8h.html#ae2e436f96deaf9390949a58574a99779">BRW_NEW_RASTERIZER_DISCARD</a>, <a class="el" href="brw__context_8h.html#a67608e65ec3c4689fbc0f5ff6bf24dbc">brw_write_depth_count()</a>, <a class="el" href="brw__context_8h.html#a4e815220738b6271c9677fc40fc0e604">brw_write_timestamp()</a>, <a class="el" href="structbrw__context.html#a09b215d26b759d54ed8f2f9c65f12ba8">brw_context::bufmgr</a>, <a class="el" href="gen6__queryobj_8c.html#ad2ca67a331ba671ff8b8c9e22de720bb">emit_pipeline_stat()</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/config_8h.html#a520a1008d1d301b1cf1c08ce10275d0b">MAX_VERTEX_STREAMS</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#afcdc987c5895053ecd784a2213462b3e">gl_context::NewDriverState</a>, <a class="el" href="gen6__queryobj_8c.html#ac6c370969bb193976403bac7740be8d7">set_query_availability()</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a92a349eac3c3fb716b845de3af199eff">gl_query_object::Stream</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b8af5a152361cbab9510efac6aea8d5">gl_query_object::Target</a>, <a class="el" href="gen6__queryobj_8c.html#a2713d325b98d954a0a08b8c4fe22bab3">write_primitives_generated()</a>, <a class="el" href="gen6__queryobj_8c.html#a8a231e7fa92e207fbc30d0df1241ac9a">write_xfb_overflow_streams()</a>, and <a class="el" href="gen6__queryobj_8c.html#a7c02fe5493c659326cce16402e078da4">write_xfb_primitives_written()</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a95aabfaef4b42fa400d28a02a87376d4">gen6_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a265f161f71a5f425c975c13e249ea442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a265f161f71a5f425c975c13e249ea442">&sect;&nbsp;</a></span>gen6_check_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen6_check_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CheckQuery() driver hook. </p>
<p>Checks whether a query result is ready yet. If not, flushes. This is the backing for glGetQueryObjectiv()'s QUERY_RESULT_AVAILABLE pname. </p>

<p>References <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="gen6__queryobj_8c.html#a711322ef0fe4e49b82961533d660c1b6">flush_batch_if_needed()</a>, and <a class="el" href="gen6__queryobj_8c.html#ae5f09c8f0bbdab08eab62218118e8736">gen6_queryobj_get_results()</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a95aabfaef4b42fa400d28a02a87376d4">gen6_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="ad3e28bb9058fe2fdf3b388a39b18b92f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3e28bb9058fe2fdf3b388a39b18b92f">&sect;&nbsp;</a></span>gen6_end_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen6_end_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Driver hook for glEndQuery(). </p>
<p>Emits GPU commands to record a final query value, ending any data capturing. However, the final result isn't necessarily available until the GPU processes those commands. <a class="el" href="brw__queryobj_8c.html#a20f30d32421fe01a193479bf7f7f71a4" title="Wait on the query object&#39;s BO and calculate the final result. ">brw_queryobj_get_results()</a> processes the captured data to produce the final result. </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__context_8h.html#ae2e436f96deaf9390949a58574a99779">BRW_NEW_RASTERIZER_DISCARD</a>, <a class="el" href="brw__context_8h.html#a67608e65ec3c4689fbc0f5ff6bf24dbc">brw_write_depth_count()</a>, <a class="el" href="brw__context_8h.html#a4e815220738b6271c9677fc40fc0e604">brw_write_timestamp()</a>, <a class="el" href="gen6__queryobj_8c.html#ad2ca67a331ba671ff8b8c9e22de720bb">emit_pipeline_stat()</a>, <a class="el" href="structbrw__query__object.html#a15d97518e4f675cca5888a07998ff537">brw_query_object::flushed</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/config_8h.html#a520a1008d1d301b1cf1c08ce10275d0b">MAX_VERTEX_STREAMS</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#afcdc987c5895053ecd784a2213462b3e">gl_context::NewDriverState</a>, <a class="el" href="gen6__queryobj_8c.html#ac6c370969bb193976403bac7740be8d7">set_query_availability()</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a92a349eac3c3fb716b845de3af199eff">gl_query_object::Stream</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b8af5a152361cbab9510efac6aea8d5">gl_query_object::Target</a>, <a class="el" href="gen6__queryobj_8c.html#a2713d325b98d954a0a08b8c4fe22bab3">write_primitives_generated()</a>, <a class="el" href="gen6__queryobj_8c.html#a8a231e7fa92e207fbc30d0df1241ac9a">write_xfb_overflow_streams()</a>, and <a class="el" href="gen6__queryobj_8c.html#a7c02fe5493c659326cce16402e078da4">write_xfb_primitives_written()</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a95aabfaef4b42fa400d28a02a87376d4">gen6_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a95aabfaef4b42fa400d28a02a87376d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95aabfaef4b42fa400d28a02a87376d4">&sect;&nbsp;</a></span>gen6_init_queryobj_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen6_init_queryobj_functions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html">dd_function_table</a> *&#160;</td>
          <td class="paramname"><em>functions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="gen6__queryobj_8c.html" title="Support for query objects (GL_ARB_occlusion_query, GL_ARB_timer_query, GL_EXT_transform_feedback, and friends) on platforms that support hardware contexts (Gen6+). ">gen6_queryobj.c</a> </p>

<p>References <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a03c0d1e1692e47728f27a84934042bc2">dd_function_table::BeginQuery</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a1cba6a762440ecd2a7b5d35fd51879d2">dd_function_table::CheckQuery</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a519202bac56fe708e9ea5e0994ccc4ee">dd_function_table::EndQuery</a>, <a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query()</a>, <a class="el" href="gen6__queryobj_8c.html#a265f161f71a5f425c975c13e249ea442">gen6_check_query()</a>, <a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query()</a>, <a class="el" href="gen6__queryobj_8c.html#ae5ebfc712776c1ac0b3142c29b4b0beb">gen6_query_counter()</a>, <a class="el" href="gen6__queryobj_8c.html#ac667af1e65361ef31e4f82e235d3b210">gen6_wait_query()</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#a0d392ddc8de12006254d41ab7eb831a5">dd_function_table::QueryCounter</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structdd__function__table.html#afb83cdd7583bceb1e7012e54d6a310dd">dd_function_table::WaitQuery</a>.</p>

<p>Referenced by <a class="el" href="brw__context_8c.html#ab670ec47d2c02db29495492708be9e2c">brw_init_driver_functions()</a>, and <a class="el" href="hsw__queryobj_8c.html#a7c4eb209580bd992f5f5be8a9404b52b">hsw_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="ae5ebfc712776c1ac0b3142c29b4b0beb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ebfc712776c1ac0b3142c29b4b0beb">&sect;&nbsp;</a></span>gen6_query_counter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen6_query_counter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__context_8h.html#a88fe16984744aeecf1cd682d3c924557">brw_query_counter()</a>, and <a class="el" href="gen6__queryobj_8c.html#ac6c370969bb193976403bac7740be8d7">set_query_availability()</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a95aabfaef4b42fa400d28a02a87376d4">gen6_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="ae5f09c8f0bbdab08eab62218118e8736"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5f09c8f0bbdab08eab62218118e8736">&sect;&nbsp;</a></span>gen6_queryobj_get_results()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen6_queryobj_get_results </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait on the query object's BO and calculate the final result. </p>

<p>References <a class="el" href="structbrw__query__object.html#a80f5fad8685cce0e347bc8c439de1f81">brw_query_object::Base</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#af58a972a27d6382b3ecc7f55224c62c5">brw_bo_map()</a>, <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__context_8h.html#ae4d50606da6592a872381d0a29496adc">brw_raw_timestamp_delta()</a>, <a class="el" href="brw__context_8h.html#abb07765eb2d9602f20d9f3b098cdfb92">brw_timebase_scale()</a>, <a class="el" href="gen6__queryobj_8c.html#ad1ffd95c5d4f9ed2da2c57081b82e535">check_xfb_overflow_streams()</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#a225ea8c45facc3040c10c9460e031c04">gl_context::Const</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="structbrw__context.html#a8e6ed8fbbefb6e285ca3d1594fcbda3e">brw_context::is_haswell</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/config_8h.html#a520a1008d1d301b1cf1c08ce10275d0b">MAX_VERTEX_STREAMS</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__constants.html#aab52b43ee083fa59386f7737d96a23f5">gl_constants::QueryCounterBits</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b23f69be0c466a0c80f6a2e441a6e43">gl_query_object::Ready</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a77b53ea793b0ecf0a93712ef55721012">gl_query_object::Result</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html#a8b8af5a152361cbab9510efac6aea8d5">gl_query_object::Target</a>, and <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__constants.html#a75613c0cd9b5bdd080c6bbe30f60f620">gl_constants::Timestamp</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a265f161f71a5f425c975c13e249ea442">gen6_check_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ac667af1e65361ef31e4f82e235d3b210">gen6_wait_query()</a>.</p>

</div>
</div>
<a id="ac667af1e65361ef31e4f82e235d3b210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac667af1e65361ef31e4f82e235d3b210">&sect;&nbsp;</a></span>gen6_wait_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen6_wait_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__query__object.html">gl_query_object</a> *&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The WaitQuery() driver hook. </p>
<p>Wait for a query result to become available and return it. This is the backing for glGetQueryObjectiv() with the GL_QUERY_RESULT pname. </p>

<p>References <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="gen6__queryobj_8c.html#a711322ef0fe4e49b82961533d660c1b6">flush_batch_if_needed()</a>, and <a class="el" href="gen6__queryobj_8c.html#ae5f09c8f0bbdab08eab62218118e8736">gen6_queryobj_get_results()</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a95aabfaef4b42fa400d28a02a87376d4">gen6_init_queryobj_functions()</a>.</p>

</div>
</div>
<a id="a44934083fd2ddaf217b94ccb2601ed9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44934083fd2ddaf217b94ccb2601ed9c">&sect;&nbsp;</a></span>pipeline_target_to_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pipeline_target_to_index </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/config_8h.html#a62ffc296b13481279ca8bcf44e75f9d4">MAX_PIPELINE_STATISTICS</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#ad2ca67a331ba671ff8b8c9e22de720bb">emit_pipeline_stat()</a>.</p>

</div>
</div>
<a id="ac6c370969bb193976403bac7740be8d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6c370969bb193976403bac7740be8d7">&sect;&nbsp;</a></span>set_query_availability()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> set_query_availability </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbrw__query__object.html">brw_query_object</a> *&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>available</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__extensions.html#a0b00c9a65333c52d05e623239fd3c045">gl_extensions::ARB_query_buffer_object</a>, <a class="el" href="structbrw__query__object.html#a08261aa936f93b47de936bab30670ef3">brw_query_object::bo</a>, <a class="el" href="brw__context_8h.html#a61e9ae0442c7f6b83f6b2f802c3768c1">brw_emit_pipe_control_write()</a>, <a class="el" href="brw__context_8h.html#a5941efa7399eefa1546c438b7e45cc6a">brw_is_query_pipelined()</a>, <a class="el" href="structbrw__context.html#a88c20917f04c226b48929a0e78e30ae2">brw_context::ctx</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#a42c593ad4789f858c99817c631137507">gl_context::Extensions</a>, and <a class="el" href="brw__defines_8h.html#ab7bb674eaa9afab254f6ef30b41ddb7d">PIPE_CONTROL_WRITE_IMMEDIATE</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query()</a>, <a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ae5ebfc712776c1ac0b3142c29b4b0beb">gen6_query_counter()</a>.</p>

</div>
</div>
<a id="a2713d325b98d954a0a08b8c4fe22bab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2713d325b98d954a0a08b8c4fe22bab3">&sect;&nbsp;</a></span>write_primitives_generated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> write_primitives_generated </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">drm_intel_bo *&#160;</td>
          <td class="paramname"><em>query_bo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="brw__context_8h.html#aaad4a2728d541a3f27b06e2ce5a09c7d">brw_emit_mi_flush()</a>, <a class="el" href="brw__context_8h.html#ac9126dcaea8cbc8637d2b0d7666d84ef">brw_store_register_mem64()</a>, <a class="el" href="brw__defines_8h.html#a2d0e0ae0294f63175347827ea8cca846">CL_INVOCATION_COUNT</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, and <a class="el" href="brw__defines_8h.html#a70380d94efcccb613e9014678a74c326">GEN7_SO_PRIM_STORAGE_NEEDED</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query()</a>.</p>

</div>
</div>
<a id="a8a231e7fa92e207fbc30d0df1241ac9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a231e7fa92e207fbc30d0df1241ac9a">&sect;&nbsp;</a></span>write_xfb_overflow_streams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> write_xfb_overflow_streams </td>
          <td>(</td>
          <td class="paramtype">struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html">gl_context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">drm_intel_bo *&#160;</td>
          <td class="paramname"><em>bo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="brw__context_8h.html#a59fb34ac1c380dd6be0984c4bb4798e4">brw_context()</a>, <a class="el" href="brw__context_8h.html#aaad4a2728d541a3f27b06e2ce5a09c7d">brw_emit_mi_flush()</a>, <a class="el" href="brw__context_8h.html#ac9126dcaea8cbc8637d2b0d7666d84ef">brw_store_register_mem64()</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="brw__defines_8h.html#a23c39abb2843dd474a24a3f8376bcf84">GEN6_SO_NUM_PRIMS_WRITTEN</a>, <a class="el" href="brw__defines_8h.html#a2c46cd5781e58bd4a10ca735e4dc0e10">GEN6_SO_PRIM_STORAGE_NEEDED</a>, <a class="el" href="brw__defines_8h.html#aaa56c50c6c3e28a67cccfd73705a9104">GEN7_SO_NUM_PRIMS_WRITTEN</a>, and <a class="el" href="brw__defines_8h.html#a70380d94efcccb613e9014678a74c326">GEN7_SO_PRIM_STORAGE_NEEDED</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query()</a>.</p>

</div>
</div>
<a id="a7c02fe5493c659326cce16402e078da4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c02fe5493c659326cce16402e078da4">&sect;&nbsp;</a></span>write_xfb_primitives_written()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> write_xfb_primitives_written </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">drm_intel_bo *&#160;</td>
          <td class="paramname"><em>bo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="brw__context_8h.html#aaad4a2728d541a3f27b06e2ce5a09c7d">brw_emit_mi_flush()</a>, <a class="el" href="brw__context_8h.html#ac9126dcaea8cbc8637d2b0d7666d84ef">brw_store_register_mem64()</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="brw__defines_8h.html#a23c39abb2843dd474a24a3f8376bcf84">GEN6_SO_NUM_PRIMS_WRITTEN</a>, and <a class="el" href="brw__defines_8h.html#aaa56c50c6c3e28a67cccfd73705a9104">GEN7_SO_NUM_PRIMS_WRITTEN</a>.</p>

<p>Referenced by <a class="el" href="gen6__queryobj_8c.html#a8d7de107b76e535d48c792425ca11832">gen6_begin_query()</a>, and <a class="el" href="gen6__queryobj_8c.html#ad3e28bb9058fe2fdf3b388a39b18b92f">gen6_end_query()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
