<html>
<head>
<title>Mesa Source Code Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="qindex">
<a class="qindex" href="../main/index.html">core</a> |
<a class="qindex" href="../glapi/index.html">glapi</a> |
<a class="qindex" href="../glsl/index.html">glsl</a> |
<a class="qindex" href="../nir/index.html">nir</a> |
<a class="qindex" href="../vbo/index.html">vbo</a> |
<a class="qindex" href="../math/index.html">math</a> |
<a class="qindex" href="../swrast/index.html">swrast</a> |
<a class="qindex" href="../swrast_setup/index.html">swrast_setup</a> |
<a class="qindex" href="../tnl/index.html">tnl</a> |
<a class="qindex" href="../tnl_dd/index.html">tnl_dd</a> |
<a class="qindex" href="../gbm/index.html">gbm</a> |
<a class="qindex" href="../i965/index.html">i965</a>
</div>
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_9172db528ee902c60f00bbddd6d6be2b.html">mesa</a></li><li class="navelem"><a class="el" href="dir_18c0559f0dc03c9de8793d4f4d9250e0.html">drivers</a></li><li class="navelem"><a class="el" href="dir_f9d2f2c49ee9856d84d18416dd980e1f.html">dri</a></li><li class="navelem"><a class="el" href="dir_402a52f95aa7794c8781e5eebb48eed0.html">i965</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">gen6_constant_state.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="brw__context_8h.html">brw_context.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__state_8h.html">brw_state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__defines_8h.html">brw_defines.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="intel__batchbuffer_8h.html">intel_batchbuffer.h</a>&quot;</code><br />
<code>#include &quot;program/prog_parameter.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aacdb8a193ac2ffc984dce8ce3a632871"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__constant__state_8c.html#aacdb8a193ac2ffc984dce8ce3a632871">gen7_upload_constant_state</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, const struct <a class="el" href="structbrw__stage__state.html">brw_stage_state</a> *stage_state, bool active, unsigned opcode)</td></tr>
<tr class="separator:aacdb8a193ac2ffc984dce8ce3a632871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04f032440e9e6451b329df4d56ca9a2c"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen6__constant__state_8c.html#a04f032440e9e6451b329df4d56ca9a2c">gen6_upload_push_constants</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, const struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__program.html">gl_program</a> *prog, const struct brw_stage_prog_data *prog_data, struct <a class="el" href="structbrw__stage__state.html">brw_stage_state</a> *stage_state)</td></tr>
<tr class="memdesc:a04f032440e9e6451b329df4d56ca9a2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a streamed BO containing the push constants for the VS or GS on gen6+.  <a href="#a04f032440e9e6451b329df4d56ca9a2c">More...</a><br /></td></tr>
<tr class="separator:a04f032440e9e6451b329df4d56ca9a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a04f032440e9e6451b329df4d56ca9a2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04f032440e9e6451b329df4d56ca9a2c">&sect;&nbsp;</a></span>gen6_upload_push_constants()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen6_upload_push_constants </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__program.html">gl_program</a> *&#160;</td>
          <td class="paramname"><em>prog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct brw_stage_prog_data *&#160;</td>
          <td class="paramname"><em>prog_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbrw__stage__state.html">brw_stage_state</a> *&#160;</td>
          <td class="paramname"><em>stage_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a streamed BO containing the push constants for the VS or GS on gen6+. </p>
<p>Push constants are constant values (such as GLSL uniforms) that are pre-loaded into a shader stage's register space at thread spawn time.</p>
<p>Not all GLSL uniforms will be uploaded as push constants: The hardware has a limitation of 32 or 64 EU registers (256 or 512 floats) per stage to be uploaded as push constants, while GL 4.4 requires at least 1024 components to be usable for the VS. Plus, currently we always use pull constants instead of push constants when doing variable-index array access.</p>
<p>See <a class="el" href="brw__curbe_8c.html" title="Push constant handling for gen4/5. ">brw_curbe.c</a> for the equivalent gen4/5 code. </p>

<p>References <a class="el" href="brw__state_8h.html#a5ac38367823e29fd09ed383fe63951a9">brw_state_batch()</a>, <a class="el" href="structbrw__context.html#a88c20917f04c226b48929a0e78e30ae2">brw_context::ctx</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__program.html#aca16898039f1b1387adeb95951497e9e">gl_program::Parameters</a>, <a class="el" href="structbrw__stage__state.html#a4ecaa1b54d6eae12517a82df398c795d">brw_stage_state::push_const_offset</a>, <a class="el" href="structbrw__stage__state.html#af09469a5dc1482bb1358dfeb18c79d63">brw_stage_state::push_const_size</a>, and <a class="el" href="structbrw__stage__state.html#af7df762f05550fa293a342deee2ffe14">brw_stage_state::stage</a>.</p>

<p>Referenced by <a class="el" href="brw__context_8h.html#a515786ba3c44ae847d7f1592097f8756">brw_depth_writes_enabled()</a>, <a class="el" href="gen6__gs__state_8c.html#a69205760851fdbcc3e9d958184050146">gen6_upload_gs_push_constants()</a>, <a class="el" href="gen6__vs__state_8c.html#abde16f4cb87179714bce70213e3be807">gen6_upload_vs_push_constants()</a>, <a class="el" href="gen6__wm__state_8c.html#a2b6d43a053fa5ee18aaa1680c76c4563">gen6_upload_wm_push_constants()</a>, <a class="el" href="gen7__hs__state_8c.html#afd743a729d5249684fa79bda3e29950d">gen7_upload_tcs_push_constants()</a>, and <a class="el" href="gen7__ds__state_8c.html#a912f22e460e2a331be98d861bb241ec7">gen7_upload_tes_push_constants()</a>.</p>

</div>
</div>
<a id="aacdb8a193ac2ffc984dce8ce3a632871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacdb8a193ac2ffc984dce8ce3a632871">&sect;&nbsp;</a></span>gen7_upload_constant_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen7_upload_constant_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structbrw__stage__state.html">brw_stage_state</a> *&#160;</td>
          <td class="paramname"><em>stage_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>opcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="intel__batchbuffer_8h.html#a4b8e745696f6e0bdb4a9247a513dc299">ADVANCE_BATCH</a>, <a class="el" href="structbrw__context.html#aee33040c7b0ca50d9f8713eaa31855e5">brw_context::batch</a>, <a class="el" href="intel__batchbuffer_8h.html#a7d9cc5f4e1a3e4d27c102773652a9e11">BEGIN_BATCH</a>, <a class="el" href="structintel__batchbuffer.html#ad06131dbf7b8ef92ccceec9dbebea2cb">intel_batchbuffer::bo</a>, <a class="el" href="brw__context_8h.html#ab21749d5164dcbe5327b32453d74920c">BRW_NEW_SURFACES</a>, <a class="el" href="structbrw__context.html#a88c20917f04c226b48929a0e78e30ae2">brw_context::ctx</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="brw__defines_8h.html#a7771d30fea5300d77608538621efedb4">GEN7_MOCS_L3</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#afcdc987c5895053ecd784a2213462b3e">gl_context::NewDriverState</a>, <a class="el" href="intel__batchbuffer_8h.html#a17b64616564afb9e0fdbdd423470503d">OUT_BATCH</a>, <a class="el" href="intel__batchbuffer_8h.html#ae9f594caa28fcd06ad9e393185f8918a">OUT_RELOC64</a>, <a class="el" href="structbrw__stage__state.html#a4ecaa1b54d6eae12517a82df398c795d">brw_stage_state::push_const_offset</a>, and <a class="el" href="structbrw__stage__state.html#af09469a5dc1482bb1358dfeb18c79d63">brw_stage_state::push_const_size</a>.</p>

<p>Referenced by <a class="el" href="gen6__gs__state_8c.html#a69205760851fdbcc3e9d958184050146">gen6_upload_gs_push_constants()</a>, <a class="el" href="gen6__vs__state_8c.html#abde16f4cb87179714bce70213e3be807">gen6_upload_vs_push_constants()</a>, <a class="el" href="gen6__wm__state_8c.html#a2b6d43a053fa5ee18aaa1680c76c4563">gen6_upload_wm_push_constants()</a>, <a class="el" href="gen7__hs__state_8c.html#afd743a729d5249684fa79bda3e29950d">gen7_upload_tcs_push_constants()</a>, and <a class="el" href="gen7__ds__state_8c.html#a912f22e460e2a331be98d861bb241ec7">gen7_upload_tes_push_constants()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
