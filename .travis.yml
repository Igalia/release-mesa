sudo: false
os: linux
language: c
services:
  - docker

notifications:
  email: false

branches:
  only:
    - travis

env:
  - BUILD=autotools
  - BUILD=scons

before_script:
  - pip install docker-jinja
  - wget https://raw.githubusercontent.com/Igalia/mesa-dockerfiles/travis/Dockerfile.mesa.travis.jinja

script:
  - dj -d Dockerfile.mesa.travis.jinja -o Dockerfile -e BUILD=$BUILD
  - docker build . -f Dockerfile -t igalia/mesa
