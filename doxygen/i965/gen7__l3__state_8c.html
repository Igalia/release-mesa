<html>
<head>
<title>Mesa Source Code Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="qindex">
<a class="qindex" href="../main/index.html">core</a> |
<a class="qindex" href="../glapi/index.html">glapi</a> |
<a class="qindex" href="../glsl/index.html">glsl</a> |
<a class="qindex" href="../nir/index.html">nir</a> |
<a class="qindex" href="../vbo/index.html">vbo</a> |
<a class="qindex" href="../math/index.html">math</a> |
<a class="qindex" href="../swrast/index.html">swrast</a> |
<a class="qindex" href="../swrast_setup/index.html">swrast_setup</a> |
<a class="qindex" href="../tnl/index.html">tnl</a> |
<a class="qindex" href="../tnl_dd/index.html">tnl_dd</a> |
<a class="qindex" href="../gbm/index.html">gbm</a> |
<a class="qindex" href="../i965/index.html">i965</a>
</div>
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_9172db528ee902c60f00bbddd6d6be2b.html">mesa</a></li><li class="navelem"><a class="el" href="dir_18c0559f0dc03c9de8793d4f4d9250e0.html">drivers</a></li><li class="navelem"><a class="el" href="dir_f9d2f2c49ee9856d84d18416dd980e1f.html">dri</a></li><li class="navelem"><a class="el" href="dir_402a52f95aa7794c8781e5eebb48eed0.html">i965</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">gen7_l3_state.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;common/gen_l3_config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__context_8h.html">brw_context.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__defines_8h.html">brw_defines.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="brw__state_8h.html">brw_state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="intel__batchbuffer_8h.html">intel_batchbuffer.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a67e2a9f70fe0947ad071913395adcd65"><td class="memItemLeft" align="right" valign="top">static struct gen_l3_weights&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen7__l3__state_8c.html#a67e2a9f70fe0947ad071913395adcd65">get_pipeline_state_l3_weights</a> (const struct <a class="el" href="structbrw__context.html">brw_context</a> *brw)</td></tr>
<tr class="memdesc:a67e2a9f70fe0947ad071913395adcd65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the desired L3 partitioning based on the current state of the pipeline.  <a href="#a67e2a9f70fe0947ad071913395adcd65">More...</a><br /></td></tr>
<tr class="separator:a67e2a9f70fe0947ad071913395adcd65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853786fcee5192a7fc71e1cb4d1a4fad"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen7__l3__state_8c.html#a853786fcee5192a7fc71e1cb4d1a4fad">setup_l3_config</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, const struct gen_l3_config *cfg)</td></tr>
<tr class="memdesc:a853786fcee5192a7fc71e1cb4d1a4fad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Program the hardware to use the specified L3 configuration.  <a href="#a853786fcee5192a7fc71e1cb4d1a4fad">More...</a><br /></td></tr>
<tr class="separator:a853786fcee5192a7fc71e1cb4d1a4fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2311939980c12f0463ced72038f0beb"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen7__l3__state_8c.html#ad2311939980c12f0463ced72038f0beb">update_urb_size</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw, const struct gen_l3_config *cfg)</td></tr>
<tr class="memdesc:ad2311939980c12f0463ced72038f0beb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the URB size in the context state for the specified L3 configuration.  <a href="#ad2311939980c12f0463ced72038f0beb">More...</a><br /></td></tr>
<tr class="separator:ad2311939980c12f0463ced72038f0beb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a304fe4dfec687ad6d0b357836d479ea0"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen7__l3__state_8c.html#a304fe4dfec687ad6d0b357836d479ea0">emit_l3_state</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw)</td></tr>
<tr class="separator:a304fe4dfec687ad6d0b357836d479ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52fc70e6e8005147ceece60559ebde3"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen7__l3__state_8c.html#ac52fc70e6e8005147ceece60559ebde3">gen7_restore_default_l3_config</a> (struct <a class="el" href="structbrw__context.html">brw_context</a> *brw)</td></tr>
<tr class="memdesc:ac52fc70e6e8005147ceece60559ebde3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hack to restore the default L3 configuration.  <a href="#ac52fc70e6e8005147ceece60559ebde3">More...</a><br /></td></tr>
<tr class="separator:ac52fc70e6e8005147ceece60559ebde3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a26f8c1bc7ca8d3d99426422609ea9da4"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structbrw__tracked__state.html">brw_tracked_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen7__l3__state_8c.html#a26f8c1bc7ca8d3d99426422609ea9da4">gen7_l3_state</a></td></tr>
<tr class="separator:a26f8c1bc7ca8d3d99426422609ea9da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a304fe4dfec687ad6d0b357836d479ea0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a304fe4dfec687ad6d0b357836d479ea0">&sect;&nbsp;</a></span>emit_l3_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> emit_l3_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="brw__context_8h.html#ab6ebd037637fefed05987eac4941774d">BRW_NEW_BATCH</a>, <a class="el" href="intel__screen_8h.html#a7b786d36209d39264e3b2fc1fa821f52">can_do_pipelined_register_writes()</a>, <a class="el" href="structbrw__context.html#a92f2abe59a1a133bca30f2d691347695">brw_context::config</a>, <a class="el" href="structbrw__context.html#a88c20917f04c226b48929a0e78e30ae2">brw_context::ctx</a>, <a class="el" href="structintel__screen.html#a754bdfd5d66f3a9a72478892ca841ab6">intel_screen::devinfo</a>, <a class="el" href="gen7__l3__state_8c.html#a67e2a9f70fe0947ad071913395adcd65">get_pipeline_state_l3_weights()</a>, <a class="el" href="structbrw__context.html#a2ed416ddb166d81c6c4307ea5c33c78d">brw_context::l3</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#afcdc987c5895053ecd784a2213462b3e">gl_context::NewDriverState</a>, <a class="el" href="structbrw__context.html#afbbeb704f8852a35d64bfa30b06757ed">brw_context::screen</a>, <a class="el" href="gen7__l3__state_8c.html#a853786fcee5192a7fc71e1cb4d1a4fad">setup_l3_config()</a>, and <a class="el" href="gen7__l3__state_8c.html#ad2311939980c12f0463ced72038f0beb">update_urb_size()</a>.</p>

</div>
</div>
<a id="ac52fc70e6e8005147ceece60559ebde3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac52fc70e6e8005147ceece60559ebde3">&sect;&nbsp;</a></span>gen7_restore_default_l3_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> gen7_restore_default_l3_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hack to restore the default L3 configuration. </p>
<p>This will be called at the end of every batch in order to reset the L3 configuration to the default values for the time being until the kernel is fixed. Until kernel commit 6702cf16e0ba8b0129f5aa1b6609d4e9c70bc13b (included in v4.1) we would set the MI_RESTORE_INHIBIT bit when submitting batch buffers for the default context used by the DDX, which meant that any context state changed by the GL would leak into the DDX, the assumption being that the DDX would initialize any state it cares about manually. The DDX is however not careful enough to program an L3 configuration explicitly, and it makes assumptions about it (URB size) which won't hold and cause it to misrender if we let our L3 set-up to leak into the DDX.</p>
<p>Since v4.1 of the Linux kernel the default context is saved and restored normally, so it's far less likely for our L3 programming to interfere with other contexts &ndash; In fact restoring the default L3 configuration at the end of the batch will be redundant most of the time. A kind of state leak is still possible though if the context making assumptions about L3 state is created immediately after our context was active (e.g. without the DDX default context being scheduled in between) because at present the DRM doesn't fully initialize the contents of newly created contexts and instead sets the MI_RESTORE_INHIBIT flag causing it to inherit the state from the last active context.</p>
<p>It's possible to realize such a scenario if, say, an X server (or a GL application using an outdated non-L3-aware Mesa version) is started while another GL application is running and happens to have modified the L3 configuration, or if no X server is running at all and a GL application using a non-L3-aware Mesa version is started after another GL application ran and modified the L3 configuration &ndash; The latter situation can actually be reproduced easily on IVB in our CI system. </p>

<p>References <a class="el" href="intel__screen_8h.html#a7b786d36209d39264e3b2fc1fa821f52">can_do_pipelined_register_writes()</a>, <a class="el" href="structbrw__context.html#a92f2abe59a1a133bca30f2d691347695">brw_context::config</a>, <a class="el" href="structintel__screen.html#a754bdfd5d66f3a9a72478892ca841ab6">intel_screen::devinfo</a>, <a class="el" href="structbrw__context.html#a2ed416ddb166d81c6c4307ea5c33c78d">brw_context::l3</a>, <a class="el" href="structbrw__context.html#afbbeb704f8852a35d64bfa30b06757ed">brw_context::screen</a>, <a class="el" href="gen7__l3__state_8c.html#a853786fcee5192a7fc71e1cb4d1a4fad">setup_l3_config()</a>, and <a class="el" href="gen7__l3__state_8c.html#ad2311939980c12f0463ced72038f0beb">update_urb_size()</a>.</p>

<p>Referenced by <a class="el" href="intel__batchbuffer_8c.html#a65777dd5ff303b77fa6358c7a2257039">brw_finish_batch()</a>.</p>

</div>
</div>
<a id="a67e2a9f70fe0947ad071913395adcd65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67e2a9f70fe0947ad071913395adcd65">&sect;&nbsp;</a></span>get_pipeline_state_l3_weights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct gen_l3_weights get_pipeline_state_l3_weights </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the desired L3 partitioning based on the current state of the pipeline. </p>
<p>For now this simply returns the conservative defaults calculated by get_default_l3_weights(), but we could probably do better by gathering more statistics from the pipeline state (e.g. guess of expected URB usage and bound surfaces), or by using feed-back from performance counters. </p>

<p>References <a class="el" href="structbrw__stage__state.html#aabb29e286e12af1162d1eaa844f2fe5c">brw_stage_state::prog_data</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__program.html#a2c27d6a5201b986c6f99264ae183b972">gl_program::sh</a>, and <a class="el" href="structbrw__stage__state.html#af7df762f05550fa293a342deee2ffe14">brw_stage_state::stage</a>.</p>

<p>Referenced by <a class="el" href="gen7__l3__state_8c.html#a304fe4dfec687ad6d0b357836d479ea0">emit_l3_state()</a>.</p>

</div>
</div>
<a id="a853786fcee5192a7fc71e1cb4d1a4fad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a853786fcee5192a7fc71e1cb4d1a4fad">&sect;&nbsp;</a></span>setup_l3_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> setup_l3_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct gen_l3_config *&#160;</td>
          <td class="paramname"><em>cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Program the hardware to use the specified L3 configuration. </p>

<p>References <a class="el" href="intel__batchbuffer_8h.html#a4b8e745696f6e0bdb4a9247a513dc299">ADVANCE_BATCH</a>, <a class="el" href="intel__batchbuffer_8h.html#a7d9cc5f4e1a3e4d27c102773652a9e11">BEGIN_BATCH</a>, <a class="el" href="brw__context_8h.html#a0b43a6d4e729b2f9eeadd67f9fae8c62">brw_emit_pipe_control_flush()</a>, <a class="el" href="intel__screen_8h.html#a31f596e88c0ee3988f8f8621dabe0da5">can_do_hsw_l3_atomics()</a>, <a class="el" href="structbrw__context.html#a32b1f0a8fdd45fea58ffb65d8f97a1df">brw_context::gen</a>, <a class="el" href="brw__defines_8h.html#a4897545cfea71fdbab99ee8d230034a8">GEN7_L3CNTLREG2</a>, <a class="el" href="brw__defines_8h.html#a7dad2c18c66c6fcce01504ce1fb88c1a">GEN7_L3CNTLREG2_SLM_ENABLE</a>, <a class="el" href="brw__defines_8h.html#a492bdc7c86d3a99e5b0d1a6f46585ad6">GEN7_L3CNTLREG2_URB_LOW_BW</a>, <a class="el" href="brw__defines_8h.html#ada7b73aa5f6cc1c11f72015207e2815b">GEN7_L3CNTLREG3</a>, <a class="el" href="brw__defines_8h.html#a165af7ec28b8c1eb89bfd428af272529">GEN7_L3SQCREG1</a>, <a class="el" href="brw__defines_8h.html#ab4c7a37fbecf56cbd24ef8f5874d5dba">GEN7_L3SQCREG1_CONV_C_UC</a>, <a class="el" href="brw__defines_8h.html#a07c6a68ddfb3ddcc743be8b03965cd4e">GEN7_L3SQCREG1_CONV_DC_UC</a>, <a class="el" href="brw__defines_8h.html#ad307618e17e730a84d7d35c75edb6ecf">GEN7_L3SQCREG1_CONV_IS_UC</a>, <a class="el" href="brw__defines_8h.html#a13e3760076d7222b58f6dc7b25f5b30a">GEN7_L3SQCREG1_CONV_T_UC</a>, <a class="el" href="brw__defines_8h.html#a95e9f56a4ae80daca75b6aced68f90c0">GEN8_L3CNTLREG</a>, <a class="el" href="brw__defines_8h.html#a888f04ebb50f684b309a9e9594d72e75">GEN8_L3CNTLREG_SLM_ENABLE</a>, <a class="el" href="brw__defines_8h.html#affa908bac915b077f718dbcdb0d82f44">HSW_L3SQCREG1_SQGHPCI_DEFAULT</a>, <a class="el" href="brw__defines_8h.html#aee3d2321dea11274d18134cac2bf3385">HSW_ROW_CHICKEN3</a>, <a class="el" href="brw__defines_8h.html#a11a555c44b9b88c05c3718cbf0a22dfd">HSW_ROW_CHICKEN3_L3_ATOMIC_DISABLE</a>, <a class="el" href="brw__defines_8h.html#a88b0d314a425d25b45c539cbdc054190">HSW_SCRATCH1</a>, <a class="el" href="brw__defines_8h.html#ae9042d6c9b17cc08dd88f0ee850804ac">HSW_SCRATCH1_L3_ATOMIC_DISABLE</a>, <a class="el" href="structbrw__context.html#add8331b9388b5b71f37ab6d92e4f0121">brw_context::is_baytrail</a>, <a class="el" href="structbrw__context.html#a8e6ed8fbbefb6e285ca3d1594fcbda3e">brw_context::is_haswell</a>, <a class="el" href="brw__defines_8h.html#a5b68c2ac5fcaef6af59cddc50f280d08">IVB_L3SQCREG1_SQGHPCI_DEFAULT</a>, <a class="el" href="brw__defines_8h.html#a1a9009c97acd94afeb3a06b15f957f20">MI_LOAD_REGISTER_IMM</a>, <a class="el" href="intel__batchbuffer_8h.html#a17b64616564afb9e0fdbdd423470503d">OUT_BATCH</a>, <a class="el" href="brw__defines_8h.html#a4cbbd43a60af69a7bf90df5897311419">PIPE_CONTROL_CONST_CACHE_INVALIDATE</a>, <a class="el" href="brw__defines_8h.html#a4fc4c73e254fe72d35ec46d615e2366c">PIPE_CONTROL_CS_STALL</a>, <a class="el" href="brw__defines_8h.html#a417ff701a9022208b5bbcaec3d2fceb8">PIPE_CONTROL_DATA_CACHE_FLUSH</a>, <a class="el" href="brw__defines_8h.html#a097420d899594925ae97ebd383b99cf7">PIPE_CONTROL_INSTRUCTION_INVALIDATE</a>, <a class="el" href="brw__defines_8h.html#a0952613355c3bed1d2b789c4481f282f">PIPE_CONTROL_NO_WRITE</a>, <a class="el" href="brw__defines_8h.html#a072f524bce5fedee5f5531ff881832df">PIPE_CONTROL_STATE_CACHE_INVALIDATE</a>, <a class="el" href="brw__defines_8h.html#a23444ed779c4128628b55e15433da1b5">PIPE_CONTROL_TEXTURE_CACHE_INVALIDATE</a>, <a class="el" href="brw__defines_8h.html#aab03f0f086d5ae86789a178123f62257">REG_MASK</a>, <a class="el" href="structbrw__context.html#afbbeb704f8852a35d64bfa30b06757ed">brw_context::screen</a>, <a class="el" href="brw__defines_8h.html#a6d9cdc897697c83a22843755a7eb49c8">SET_FIELD</a>, and <a class="el" href="brw__defines_8h.html#ad4f1088f846972d97c85fa86bb912bf9">VLV_L3SQCREG1_SQGHPCI_DEFAULT</a>.</p>

<p>Referenced by <a class="el" href="gen7__l3__state_8c.html#a304fe4dfec687ad6d0b357836d479ea0">emit_l3_state()</a>, and <a class="el" href="gen7__l3__state_8c.html#ac52fc70e6e8005147ceece60559ebde3">gen7_restore_default_l3_config()</a>.</p>

</div>
</div>
<a id="ad2311939980c12f0463ced72038f0beb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2311939980c12f0463ced72038f0beb">&sect;&nbsp;</a></span>update_urb_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/math.tag:../math/" href="../math/m__copy__tmp_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> update_urb_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbrw__context.html">brw_context</a> *&#160;</td>
          <td class="paramname"><em>brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct gen_l3_config *&#160;</td>
          <td class="paramname"><em>cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the URB size in the context state for the specified L3 configuration. </p>

<p>References <a class="el" href="brw__context_8h.html#a4703e8df69763f441a064d5ca8649bb5">BRW_NEW_URB_SIZE</a>, <a class="el" href="structbrw__context.html#a88c20917f04c226b48929a0e78e30ae2">brw_context::ctx</a>, <a class="el" href="structintel__screen.html#a754bdfd5d66f3a9a72478892ca841ab6">intel_screen::devinfo</a>, <a class="elRef" doxygen="/opt/mesa/i965/mesa/doxygen/main.tag:../main/" href="../main/structgl__context.html#afcdc987c5895053ecd784a2213462b3e">gl_context::NewDriverState</a>, <a class="el" href="structbrw__context.html#afbbeb704f8852a35d64bfa30b06757ed">brw_context::screen</a>, <a class="el" href="structbrw__context.html#a68b371ccb2a682895b38e79bbe83574c">brw_context::size</a>, and <a class="el" href="structbrw__context.html#ac99519efa3c2460f9c3ee22763fb7cc9">brw_context::urb</a>.</p>

<p>Referenced by <a class="el" href="gen7__l3__state_8c.html#a304fe4dfec687ad6d0b357836d479ea0">emit_l3_state()</a>, and <a class="el" href="gen7__l3__state_8c.html#ac52fc70e6e8005147ceece60559ebde3">gen7_restore_default_l3_config()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a26f8c1bc7ca8d3d99426422609ea9da4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26f8c1bc7ca8d3d99426422609ea9da4">&sect;&nbsp;</a></span>gen7_l3_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structbrw__tracked__state.html">brw_tracked_state</a> gen7_l3_state</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .dirty = {</div><div class="line">      .mesa = 0,</div><div class="line">      .brw = <a class="code" href="brw__context_8h.html#ab6ebd037637fefed05987eac4941774d">BRW_NEW_BATCH</a> |</div><div class="line">             <a class="code" href="brw__context_8h.html#a0489a5f5c262b324334a11e500cf7cb0">BRW_NEW_BLORP</a> |</div><div class="line">             <a class="code" href="brw__context_8h.html#afcdb3a2de255445e07d74104d2af94a0">BRW_NEW_CS_PROG_DATA</a> |</div><div class="line">             <a class="code" href="brw__context_8h.html#abe58c801f50f8bdaf78e161ed57b9dbc">BRW_NEW_FS_PROG_DATA</a> |</div><div class="line">             <a class="code" href="brw__context_8h.html#a5cc60e0e28e390111bec832ee833122f">BRW_NEW_GS_PROG_DATA</a> |</div><div class="line">             <a class="code" href="brw__context_8h.html#a86bd37171ece3f987dcbb8286a2e56fe">BRW_NEW_VS_PROG_DATA</a>,</div><div class="line">   },</div><div class="line">   .emit = <a class="code" href="gen7__l3__state_8c.html#a304fe4dfec687ad6d0b357836d479ea0">emit_l3_state</a></div><div class="line">}</div><div class="ttc" id="brw__context_8h_html_afcdb3a2de255445e07d74104d2af94a0"><div class="ttname"><a href="brw__context_8h.html#afcdb3a2de255445e07d74104d2af94a0">BRW_NEW_CS_PROG_DATA</a></div><div class="ttdeci">#define BRW_NEW_CS_PROG_DATA</div><div class="ttdef"><b>Definition:</b> brw_context.h:256</div></div>
<div class="ttc" id="gen7__l3__state_8c_html_a304fe4dfec687ad6d0b357836d479ea0"><div class="ttname"><a href="gen7__l3__state_8c.html#a304fe4dfec687ad6d0b357836d479ea0">emit_l3_state</a></div><div class="ttdeci">static void emit_l3_state(struct brw_context *brw)</div><div class="ttdef"><b>Definition:</b> gen7_l3_state.c:211</div></div>
<div class="ttc" id="brw__context_8h_html_a86bd37171ece3f987dcbb8286a2e56fe"><div class="ttname"><a href="brw__context_8h.html#a86bd37171ece3f987dcbb8286a2e56fe">BRW_NEW_VS_PROG_DATA</a></div><div class="ttdeci">#define BRW_NEW_VS_PROG_DATA</div><div class="ttdef"><b>Definition:</b> brw_context.h:250</div></div>
<div class="ttc" id="brw__context_8h_html_abe58c801f50f8bdaf78e161ed57b9dbc"><div class="ttname"><a href="brw__context_8h.html#abe58c801f50f8bdaf78e161ed57b9dbc">BRW_NEW_FS_PROG_DATA</a></div><div class="ttdeci">#define BRW_NEW_FS_PROG_DATA</div><div class="ttdoc">BRW_NEW_*_PROG_DATA and BRW_NEW_*_PROGRAM are similar, but distinct. </div><div class="ttdef"><b>Definition:</b> brw_context.h:242</div></div>
<div class="ttc" id="brw__context_8h_html_a0489a5f5c262b324334a11e500cf7cb0"><div class="ttname"><a href="brw__context_8h.html#a0489a5f5c262b324334a11e500cf7cb0">BRW_NEW_BLORP</a></div><div class="ttdeci">#define BRW_NEW_BLORP</div><div class="ttdef"><b>Definition:</b> brw_context.h:308</div></div>
<div class="ttc" id="brw__context_8h_html_a5cc60e0e28e390111bec832ee833122f"><div class="ttname"><a href="brw__context_8h.html#a5cc60e0e28e390111bec832ee833122f">BRW_NEW_GS_PROG_DATA</a></div><div class="ttdeci">#define BRW_NEW_GS_PROG_DATA</div><div class="ttdef"><b>Definition:</b> brw_context.h:252</div></div>
<div class="ttc" id="brw__context_8h_html_ab6ebd037637fefed05987eac4941774d"><div class="ttname"><a href="brw__context_8h.html#ab6ebd037637fefed05987eac4941774d">BRW_NEW_BATCH</a></div><div class="ttdeci">#define BRW_NEW_BATCH</div><div class="ttdoc">Used for any batch entry with a relocated pointer that will be used by any 3D rendering. </div><div class="ttdef"><b>Definition:</b> brw_context.h:277</div></div>
</div><!-- fragment -->
<p>Referenced by <a class="el" href="genX__blorp__exec_8c.html#a0c10d81ce64e627c1f71c458e5b50a2d">blorp_exec()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
